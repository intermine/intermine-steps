!function(){function a(b,c,d){var e=a.resolve(b);if(null==e){d=d||b,c=c||"root";var f=new Error('Failed to require "'+d+'" from "'+c+'"');throw f.path=d,f.parent=c,f.require=!0,f}var g=a.modules[e];if(!g._resolving&&!g.exports){var h={};h.exports={},h.client=h.component=!0,g._resolving=!0,g.call(this,h.exports,a.relative(e),h),delete g._resolving,g.exports=h.exports}return g.exports}a.modules={},a.aliases={},a.resolve=function(b){"/"===b.charAt(0)&&(b=b.slice(1));for(var c=[b,b+".js",b+".json",b+"/index.js",b+"/index.json"],d=0;d<c.length;d++){var b=c[d];if(a.modules.hasOwnProperty(b))return b;if(a.aliases.hasOwnProperty(b))return a.aliases[b]}},a.normalize=function(a,b){var c=[];if("."!=b.charAt(0))return b;a=a.split("/"),b=b.split("/");for(var d=0;d<b.length;++d)".."==b[d]?a.pop():"."!=b[d]&&""!=b[d]&&c.push(b[d]);return a.concat(c).join("/")},a.register=function(b,c){a.modules[b]=c},a.alias=function(b,c){if(!a.modules.hasOwnProperty(b))throw new Error('Failed to alias "'+b+'", it does not exist');a.aliases[c]=b},a.relative=function(b){function c(a,b){for(var c=a.length;c--;)if(a[c]===b)return c;return-1}function d(c){var e=d.resolve(c);return a(e,b,c)}var e=a.normalize(b,"..");return d.resolve=function(d){var f=d.charAt(0);if("/"==f)return d.slice(1);if("."==f)return a.normalize(e,d);var g=b.split("/"),h=c(g,"deps")+1;return h||(h=0),d=g.slice(0,h+1).join("/")+"/deps/"+d},d.exists=function(b){return a.modules.hasOwnProperty(d.resolve(b))},d},function(){a.register("steps/client/src/controllers/app.js",function(a,b,c){var d,e,f,g={}.hasOwnProperty,h=function(a,b){function c(){this.constructor=a}for(var d in b)g.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};e=b("../core/Controller"),c.exports=d=function(a){function b(){return f=b.__super__.constructor.apply(this,arguments)}return h(b,a),b.prototype.reset=function(){var a;return a=window.History,a.storage.reset(),a.reset(),setTimeout(function(){return Chaplin.helpers.redirectTo("landing")},0)},b}(e)}),a.register("steps/client/src/controllers/error.js",function(a,b,c){var d,e,f,g,h={}.hasOwnProperty,i=function(a,b){function c(){this.constructor=a}for(var d in b)h.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};d=b("../core/Controller"),f=b("../views/Error"),c.exports=e=function(a){function b(){return g=b.__super__.constructor.apply(this,arguments)}return i(b,a),b.prototype[404]=function(){return this.views.push(new f({template:404})),this.adjustTitle("404")},b.prototype[500]=function(){return this.views.push(new f({template:500})),this.adjustTitle("500")},b}(d)}),a.register("steps/client/src/controllers/landing.js",function(a,b,c){var d,e,f,g,h,i={}.hasOwnProperty,j=function(a,b){function c(){this.constructor=a}for(var d in b)i.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};d=b("../core/Controller"),g=b("../core/Mediator"),f=b("../views/Landing"),c.exports=e=function(a){function b(){return h=b.__super__.constructor.apply(this,arguments)}return j(b,a),b.prototype.index=function(){return this.views.push(new f),this.adjustTitle("Welcome")},b}(d)}),a.register("steps/client/src/controllers/tools.js",function(a,b,c){var d,e,f,g,h,i,j,k,l,m={}.hasOwnProperty,n=function(a,b){function c(){this.constructor=a}for(var d in b)m.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};e=b("../core/Controller"),g=b("../core/Mediator"),d=b("../views/App"),h=b("../views/NextStepsHeader"),i=b("../views/RightSidebar"),f=b("../views/History"),k=this,c.exports=j=function(a){function c(){return l=c.__super__.constructor.apply(this,arguments)}return n(c,a),c.prototype.collection=k.History,c.prototype._chrome=function(){return this.views.push(new d),this.views.push(new h),this.views.push(new f({collection:this.collection})),this.views.push(new i)},c.prototype["new"]=function(a){var c,d,e,f,g,h;h=a.slug,e=a.extra,this._chrome(),g=k.Utils.hyphenToPascal(h);try{c=b("/steps/tools/"+g+"/Model"),f=new c,c=b("/steps/tools/"+g+"/View")}catch(i){d=i,Chaplin.helpers.redirectTo("404"),assert(!1,"Unknown tool `"+g+"`")}return this.views.push(new c({model:f,extra:e})),this.adjustTitle(f.get("title"))},c.prototype.cont=function(a){var c,d,e,f,g,h,i,j;j=a.slug,e=a.extra,f=a.guid,this._chrome(),h=k.Utils.hyphenToPascal(j);try{c=b("/steps/tools/"+h+"/Model"),g=new c,c=b("/steps/tools/"+h+"/View")}catch(l){d=l,Chaplin.helpers.redirectTo("500"),assert(!1,"Unknown tool `"+h+"`")}return i=this.collection.where({guid:f}).pop(),i||(Chaplin.helpers.redirectTo("500"),assert(!1,"No previous step")),g.set({parent:f}),this.views.push(new c({model:g,previous:i.toJSON(),extra:e,step:1})),this.adjustTitle(g.get("title"))},c.prototype.old=function(a,c){var d,e,f,h,i,j;f=a.guid,h=this.collection.where({guid:f})[0],h||(Chaplin.helpers.redirectTo("500"),assert(!1,"We do not have this Model in History")),this._chrome(),i=h.get("name");try{d=b("/steps/tools/"+i+"/View")}catch(k){e=k,Chaplin.helpers.redirectTo("500"),assert(!1,"Unknown tool `"+i+"`")}return h=this.collection.dupe(h),j="results"===c.action?2:1,this.views.push(new d({model:h,step:j})),g.publish("history:activate",f),this.adjustTitle(h.get("title"))},c}(e),j.prototype.results=j.prototype.old}),a.register("steps/client/src/core/Application.js",function(a,b,c){var d,e,f,g,h,i,j,k,l,m,n={}.hasOwnProperty,o=function(a,b){function c(){this.constructor=a}for(var d in b)n.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a},p=[].slice;b("./AssertException"),b("./Console"),b("./Utils"),e=b("./Dispatcher"),h=b("./Mediator"),g=b("./Layout"),d=b("./Controller"),l=b("/steps/tools/config"),j=l.registry,i=l.config,k=this,c.exports=f=function(a){function c(){return m=c.__super__.constructor.apply(this,arguments)}return o(c,a),c.prototype.title="InterMine Steps",c.prototype.start=function(){return this.initLayout(),this.initRegistry(),c.__super__.start.apply(this,arguments)},c.prototype.initLayout=function(){return k.Layout=new g({title:this.title,openExternalToBlank:!0})},c.prototype.initRegistry=function(){return h.subscribe("context:new",function(){var a,c,d,e,f,g,i,k,l,m,n,o,q;for(c=arguments[0],e=arguments[1],k=3<=arguments.length?p.call(arguments,2):[],null==c&&(c=[]),q=[],n=0,o=j.length;o>n;n++)l=j[n],q.push(function(){var j,n,o,p,q,r,s;for(q=l.labels,s=[],j=0,o=q.length;o>j;j++)if(m=q[j],assert(m.place,"Placement for a tool variant not provided"),_.difference(m.context||[],c).length)s.push(void 0);else{for(i=_.clone(m),i.name=window.Utils.hyphenToPascal(l.slug),r=["slug","help"],n=0,p=r.length;p>n;n++)f=r[n],i[f]=l[f];try{a=b("/steps/tools/"+i.name+"/Model"),g=new a}catch(t){d=t,Chaplin.helpers.redirectTo("500"),assert(!1,"Unknown tool `"+i.name+"`")}i.type=g.get("type"),e&&(i.guid=e),g.dispose(),0!==k.length&&(i.extra=(i.extra||[]).concat(k)),s.push(h.publish("context:render",m.place,c,i,k))}return s}());return q},this)},c}(Chaplin.Application)}),a.register("steps/client/src/core/AssertException.js",function(){var a;a=function(){function a(a){this.message=a}return a.prototype.toString=function(){return"AssertException: "+this.message},a}(),this.assert=function(b,c){if(!b)throw new a(c)}}),a.register("steps/client/src/core/Collection.js",function(a,b,c){var d,e,f,g={}.hasOwnProperty,h=function(a,b){function c(){this.constructor=a}for(var d in b)g.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};e=b("./Mediator"),c.exports=d=function(a){function b(){return f=b.__super__.constructor.apply(this,arguments)}return h(b,a),b.prototype.initialize=function(){return b.__super__.initialize.apply(this,arguments),this.timeouts=[],this},b.prototype.dispose=function(){var a,c,d,f;for(f=this.timeouts,c=0,d=f.length;d>c;c++)a=f[c],clearTimeout(a);return e.unsubscribe(null,null,this),b.__super__.dispose.apply(this,arguments)},b}(Chaplin.Collection)}),a.register("steps/client/src/core/Console.js",function(){this.console=this.console||{log:function(){}},this.console.red=function(a){return console.log("%c"+a,"color: #FFF; background: #c60f13")},this.console.blue=function(a){return console.log("%c"+a,"color: #FFF; background: #2ba6cb")},this.console.grey=function(a){return console.log("%c"+a,"color: #505050; background: #e9e9e9")},this.console.green=function(a){return console.log("%c"+a,"color: #FFF; background: #5da423")}}),a.register("steps/client/src/core/Controller.js",function(a,b,c){var d,e,f,g={}.hasOwnProperty,h=function(a,b){function c(){this.constructor=a}for(var d in b)g.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};e=b("./Mediator"),c.exports=d=function(a){function b(){return f=b.__super__.constructor.apply(this,arguments)}return h(b,a),b.prototype.views=[],b.prototype.initialize=function(){return b.__super__.initialize.apply(this,arguments)},b.prototype.dispose=function(){var a,c,d,e;for(e=this.views,c=0,d=e.length;d>c;c++)a=e[c],a.dispose();return b.__super__.dispose.apply(this,arguments)},b}(Chaplin.Controller)}),a.register("steps/client/src/core/Dispatcher.js",function(a,b,c){var d,e,f={}.hasOwnProperty,g=function(a,b){function c(){this.constructor=a}for(var d in b)f.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};c.exports=d=function(a){function b(){return e=b.__super__.constructor.apply(this,arguments)}return g(b,a),b.prototype.controllerLoaded=function(a,c,d,e,f){var g,h,i,j,k,l,m,n,o,p,q=this;for(b.__super__.controllerLoaded.apply(this,arguments),k=new f(d,e),i=[],j=arguments,p=Chaplin.utils.getAllPropertyVersions(k,"afterAction"),n=0,o=p.length;o>n;n++){g=p[n];for(l in g)if(h=g[l],l===c||RegExp("^"+l+"$").test(c)){if("string"==typeof h&&(h=k[h]),"function"!=typeof h)throw new Error("Controller#executeAfterActions: "+(""+h+" is not a valid afterAction method for "+l+"."));i.push(h)}}return m=function(a,b){return null==b&&(b=null),!k.redirected&&a?(b=a.call(k,d,e,b),b&&"function"==typeof b.then?b.then(function(a){return q.currentController&&k!==q.currentController?void 0:m(i.shift(),a)}):m(i.shift(),b)):void 0},m(i.shift())},b}(Chaplin.Dispatcher)}),a.register("steps/client/src/core/Layout.js",function(a,b,c){var d,e,f={}.hasOwnProperty,g=function(a,b){function c(){this.constructor=a}for(var d in b)f.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};c.exports=d=function(a){function b(){return e=b.__super__.constructor.apply(this,arguments)}return g(b,a),b.prototype.showHistory=!1,b}(Chaplin.Layout)}),a.register("steps/client/src/core/LocalStorage.js",function(a,b,c){var d,e=[].indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(b in this&&this[b]===a)return b;return-1};c.exports=d=function(){function a(a){this.name=a,this.refreshKeys()}return a.prototype.refreshKeys=function(){var a;return a=window.localStorage.getItem(this.name),this.keys=a&&a.split(",")||[]},a.prototype.reset=function(){var a,b,c,d;for(d=this.keys,b=0,c=d.length;c>b;b++)a=d[b],window.localStorage.removeItem(this.name+"-"+a);return this.keys=[],this.save()},a.prototype.add=function(a){var b;return assert(a.guid,"Model `guid` not provided"),window.localStorage.setItem(this.name+"-"+a.guid,JSON.stringify(a)),b=a.guid.toString(),e.call(this.keys,b)<0&&this.keys.push(b),this.save()},a.prototype.save=function(){return window.localStorage.setItem(this.name,this.keys.join(","))},a.prototype.remove=function(a){return window.localStorage.removeItem(this.name+"-"+a.guid),this.keys.splice(this.keys.indexOf(a.guid),1),this.save()},a.prototype.findAll=function(){var a,b,c,d,e;for(this.refreshKeys(),d=this.keys,e=[],b=0,c=d.length;c>b;b++)a=d[b],e.push(JSON.parse(window.localStorage.getItem(this.name+"-"+a)));return e},a}()}),a.register("steps/client/src/core/Mediator.js",function(a,b,c){var d,e=[].slice;c.exports=d={},d.publish=function(){var a,b;return a=1<=arguments.length?e.call(arguments,0):[],(b=Backbone.Events).trigger.apply(b,a)},d.subscribe=function(){var a,b;return a=1<=arguments.length?e.call(arguments,0):[],assert(3===a.length,"Context for the subscriber not provided"),(b=Backbone.Events).on.apply(b,a)},d.unsubscribe=function(){var a,b,c;return b=1<=arguments.length?e.call(arguments,0):[],null!=(a=b[0])&&assert(null!=Backbone.Events._callbacks[a],"Unknown channel `"+a+"`"),(c=Backbone.Events).off.apply(c,b)},d.channels=function(){return Object.keys(Backbone.Events._callbacks)},d.reset=function(){return Backbone.Events._callbacks=null}}),a.register("steps/client/src/core/Routes.js",function(a,b,c){c.exports=function(a){return a("","landing#index",{name:"landing"}),a("tool/:slug/new","tools#new",{name:"new"}),a("tool/:slug/:extra/new","tools#new",{name:"new"}),a("tool/:slug/continue/:guid","tools#cont",{name:"cont"}),a("tool/:slug/:extra/continue/:guid","tools#cont",{name:"cont"}),a("tool/id/:guid","tools#old",{name:"old"}),a("tool/id/:guid/results","tools#results",{name:"results"}),a("error/404","error#404",{name:"404"}),a("error/500","error#500",{name:"500"}),a("app/reset","app#reset",{name:"reset"})}}),a.register("steps/client/src/core/Utils.js",function(){this.Utils={isInt:function(a){return"number"==typeof a&&a%1===0},guid:function(){var a;return a=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)},[a(),a(),"-",a(),"-",a(),"-",a(),"-",a(),a(),a()].join("")},hyphenToPascal:function(a){var b;return function(){var c,d,e,f;for(e=a.split("-"),f=[],c=0,d=e.length;d>c;c++)b=e[c],f.push(b.charAt(0).toUpperCase()+b.slice(1));return f}().join("")},arrayEql:function(a,b){return a&&b?!(b>a||a>b):!1},inFocus:function(a){var b,c,d,e,f,g,h,i;for(c=!1,d=function(b){switch(null==b&&(b=window.event),b.type){case"focus":case"focusin":c=!1;break;case"blur":case"focusout":c=!0;break;default:c=!c}return c?void 0:a()},f=[["hidden","visibilitychange"],["mozHidden","mozvisibilitychange"],["webkitHidden","webkitvisibilitychange"],["msHidden","msvisibilitychange"]],g=0,h=f.length;h>g;g++)if(i=f[g],e=i[0],b=i[1],e in document)return document.addEventListener(b,d);return"onfocusin"in document?document.onfocusin=document.onfocusout=d:window.onfocus=window.onblur=d},cloneDeep:function(a){return JSON.parse(JSON.stringify(a))}}}),a.register("steps/client/src/core/View.js",function(a,b,c){var d,e,f,g,h={}.hasOwnProperty,i=function(a,b){function c(){this.constructor=a}for(var d in b)h.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};d=b("./Mediator"),f=this,c.exports=e=function(a){function b(){return g=b.__super__.constructor.apply(this,arguments)}return i(b,a),b.prototype.initialize=function(a){return this.options=a,b.__super__.initialize.apply(this,arguments),this.views=[],this.timeouts=[],this},b.prototype.attach=function(){return b.__super__.attach.apply(this,arguments),$(this.el).attr("data-cid",this.cid)},b.prototype.dispose=function(){var a,c,e,f,g,h,i,j;for(i=this.views,e=0,g=i.length;g>e;e++)c=i[e],null!=c&&c.dispose();for(j=this.timeouts,f=0,h=j.length;h>f;f++)a=j[f],clearTimeout(a);return d.unsubscribe(null,null,this),b.__super__.dispose.apply(this,arguments)},b.prototype.property=function(a){return f.Utils.cloneDeep(a)},b}(Chaplin.View)}),a.register("steps/client/src/initialize.js",function(a,b){var c;c=this,$(function(){var a,d,e,f;return Modernizr.localstorage&&Modernizr.history?(d=b("./core/Application"),f=b("./core/Routes"),a=b("./models/History"),(new a).bootup(function(a){return c.History=a,c.App=new d({controllerPath:"/steps/client/src/controllers/",controllerSuffix:"",routes:f})})):(e=b("./views/Error"),new e({template:"no-html5"}))})}),a.register("steps/client/src/models/History.js",function(a,b,c){var d,e,f,g,h,i,j,k,l=function(a,b){return function(){return a.apply(b,arguments)}},m={}.hasOwnProperty,n=function(a,b){function c(){this.constructor=a}for(var d in b)m.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};d=b("../core/Collection"),h=b("../core/Mediator"),g=b("../core/LocalStorage"),e=b("../core/Controller"),i=b("./Tool"),j=this,c.exports=f=function(a){function c(){return this.addTool=l(this.addTool,this),this.checkStorage=l(this.checkStorage,this),k=c.__super__.constructor.apply(this,arguments)}return n(c,a),c.prototype.model=i,c.prototype.initialize=function(){return c.__super__.initialize.apply(this,arguments),this.storage=new g("Steps"),h.subscribe("history:add",this.addTool,this),this.controller=new e},c.prototype.bootup=function(a){var b,c,d,e;for(b=this.storage.findAll(),d=0,e=b.length;e>d;d++)c=b[d],this.add(c);return j.Utils.inFocus(this.checkStorage),a(this)},c.prototype.checkStorage=function(){var a,b,c,d,e,f;for(e=this.storage.findAll(),f=[],c=0,d=e.length;d>c;c++)switch(b=e[c],a=b.guid,assert(a,"LocalStorage object has no `guid`"),this.where({guid:a}).length){case 0:console.log("Adding `"+a+"`"),f.push(this.add(b));break;case 1:break;default:f.push(assert(!1,"Cannot have more than 1 object with the same `guid`"))}return f},c.prototype.addTool=function(a,b){var c,d,e;for(null==b&&(b=!0),e=!0;e;)c=j.Utils.guid(),0===this.where({guid:c}).length&&(e=!1);return a.set({guid:c}),d=a.get("locked"),a.set({locked:!0}),a.set("created",new Date),this.add(a),this.storage.add(a.toJSON()),null!=b?Chaplin.helpers.redirectTo("results",{slug:a.get("slug"),guid:c}):void 0},c.prototype.dupe=function(a){var c,d;return d=a.toJSON(),c=b("/steps/tools/"+d.name+"/Model"),new c(d)},c}(d)}),a.register("steps/client/src/models/Tool.js",function(a,b,c){var d,e,f={}.hasOwnProperty,g=function(a,b){function c(){this.constructor=a}for(var d in b)f.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};c.exports=d=function(a){function b(){return e=b.__super__.constructor.apply(this,arguments)}return g(b,a),b}(Chaplin.Model)}),a.register("steps/client/src/templates/action.js",function(a,b,c){c.exports=function(a){a||(a={});var b,c=[],d=function(a){return a&&a.ecoSafe?a:"undefined"!=typeof a&&null!=a?f(a):""},e=a.safe,f=a.escape;return b=a.safe=function(a){if(a&&a.ecoSafe)return a;("undefined"==typeof a||null==a)&&(a="");var b=new String(a);return b.ecoSafe=!0,b},f||(f=a.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){c.push("<!-- help text provided? -->\n"),this.help&&c.push('\n    <span class="entypo help -steps-ui" title="Show help for this item"></span>\n'),c.push("\n\n<!-- the link -->\n"),this.extra?(c.push('\n    <a href="/tool/'),c.push(d(this.slug)),c.push("/"),c.push(d(this.extra)),c.push("/"),c.push(d(this.suffix)),c.push('">'),c.push(this.label),c.push("</a>\n")):(c.push('\n    <a href="/tool/'),c.push(d(this.slug)),c.push("/"),c.push(d(this.suffix)),c.push('">'),c.push(this.label),c.push("</a>\n"))}).call(this)}.call(a),a.safe=e,a.escape=f,c.join("")}}),a.register("steps/client/src/templates/app.js",function(a,b,c){c.exports=function(a){a||(a={});var b,c=[],d=a.safe,e=a.escape;return b=a.safe=function(a){if(a&&a.ecoSafe)return a;("undefined"==typeof a||null==a)&&(a="");var b=new String(a);return b.ecoSafe=!0,b},e||(e=a.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){c.push('<div id="wrapper">\n    <!-- header, account etc. -->\n    <header id="top">\n        <div class="row">\n            <div class="third column">\n                <p>Monsieur Tout-le-Monde <span>&#8226;</span> <a>Logout</a></p>\n            </div>\n            <div class="first column">\n                <a href="/"><h1>InterMine Steps <span>&alpha;</span></h1></a>\n            </div>\n            <div class="second column">\n                <input id="search" type="text" placeholder="e.g. list upload, PPARG" />\n                <div id="always-on"></div>\n            </div>\n        </div>\n    </header>\n\n    <section id="middle" class="-steps-ui">\n        <!-- the tool -->\n        <div id="widget"></div>\n        <!-- from here -->\n        <aside id="right" class="-steps-ui"></aside>\n    </section>\n</div>\n\n<!-- tools used in the history -->\n<div id="history" class="-steps-ui"></div>')}).call(this)}.call(a),a.safe=d,a.escape=e,c.join("")}}),a.register("steps/client/src/templates/crumb.js",function(a,b,c){c.exports=function(a){a||(a={});var b,c=[],d=function(a){return a&&a.ecoSafe?a:"undefined"!=typeof a&&null!=a?f(a):""},e=a.safe,f=a.escape;return b=a.safe=function(a){if(a&&a.ecoSafe)return a;("undefined"==typeof a||null==a)&&(a="");var b=new String(a);return b.ecoSafe=!0,b},f||(f=a.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){c.push('<span class="entypo rightopen -steps-ui"></span>\n<a href="/tool/id/'),c.push(d(this.guid)),c.push('">'),c.push(d(this.title)),c.push("</a>")}).call(this)}.call(a),a.safe=e,a.escape=f,c.join("")}}),a.register("steps/client/src/templates/error-404.js",function(a,b,c){c.exports=function(a){a||(a={});var b,c=[],d=a.safe,e=a.escape;return b=a.safe=function(a){if(a&&a.ecoSafe)return a;("undefined"==typeof a||null==a)&&(a="");var b=new String(a);return b.ecoSafe=!0,b},e||(e=a.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){c.push('<div id="wrapper">\n    <header id="top">\n        <div class="row">\n            <div class="first column">\n                <a href="/"><h1>InterMine Steps <span>&alpha;</span></h1></a>\n            </div>\n        </div>\n    </header>\n\n    <section id="middle" class="narrow -steps-ui">\n        <div id="landing" class="row">\n            <h2>404, Not Found</h2>\n        </div>\n    </section>\n</div>\n\n<footer id="wide" class="-steps-ui">\n    <p>&copy; 2000-2013 InterMine, University of Cambridge</p>\n</footer>')}).call(this)}.call(a),a.safe=d,a.escape=e,c.join("")}}),a.register("steps/client/src/templates/error-500.js",function(a,b,c){c.exports=function(a){a||(a={});var b,c=[],d=a.safe,e=a.escape;return b=a.safe=function(a){if(a&&a.ecoSafe)return a;("undefined"==typeof a||null==a)&&(a="");var b=new String(a);return b.ecoSafe=!0,b},e||(e=a.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){c.push('<div id="wrapper">\n    <header id="top">\n        <div class="row">\n            <div class="first column">\n                <a href="/"><h1>InterMine Steps <span>&alpha;</span></h1></a>\n            </div>\n        </div>\n    </header>\n\n    <section id="middle" class="narrow -steps-ui">\n        <div id="landing" class="row">\n            <h2>500, Internal App Error</h2>\n        </div>\n    </section>\n</div>\n\n<footer id="wide" class="-steps-ui">\n    <p>&copy; 2000-2013 InterMine, University of Cambridge</p>\n</footer>')}).call(this)}.call(a),a.safe=d,a.escape=e,c.join("")}}),a.register("steps/client/src/templates/error-no-html5.js",function(a,b,c){c.exports=function(a){a||(a={});var b,c=[],d=a.safe,e=a.escape;return b=a.safe=function(a){if(a&&a.ecoSafe)return a;("undefined"==typeof a||null==a)&&(a="");var b=new String(a);return b.ecoSafe=!0,b},e||(e=a.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){c.push('<div id="wrapper">\n    <header id="top">\n        <div class="row">\n            <div class="first column">\n                <a href="/"><h1>InterMine Steps <span>&alpha;</span></h1></a>\n            </div>\n        </div>\n    </header>\n\n    <section id="middle" class="narrow -steps-ui">\n        <div id="landing" class="row">\n            <h2>Your browser does not support either <a href="http://diveintohtml5.info/storage.html" target="_new">localStorage</a> or <a href="http://diveintohtml5.info/history.html" target="_new">pushState</a>, sadness &hellip;</h2>\n            <p>Please use a different browser or disable a browser addon (related to cookies etc.) that could be blocking the functionality.</p>\n        </div>\n    </section>\n</div>\n\n<footer id="wide" class="-steps-ui">\n    <p>&copy; 2000-2013 InterMine, University of Cambridge</p>\n</footer>')}).call(this)}.call(a),a.safe=d,a.escape=e,c.join("")}}),a.register("steps/client/src/templates/history-tool.js",function(a,b,c){c.exports=function(a){a||(a={});var b,c=[],d=function(a){return a&&a.ecoSafe?a:"undefined"!=typeof a&&null!=a?f(a):""},e=a.safe,f=a.escape;return b=a.safe=function(a){if(a&&a.ecoSafe)return a;("undefined"==typeof a||null==a)&&(a="");var b=new String(a);return b.ecoSafe=!0,b},f||(f=a.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){c.push('<em class="ago"></em>\n<div class="wrap">\n    <a href="/tool/id/'),c.push(d(this.guid)),c.push('">\n        <div class="box -steps-ui">\n            <h5>'),c.push(d(this.name)),c.push("</h5>\n            "),this.description.length>15?(c.push('\n                <p title="'),c.push(d(this.description)),c.push('">'),c.push(this.description.slice(0,15)),c.push(" &hellip;</p>\n            ")):(c.push("\n                <p>"),c.push(this.description),c.push("</p>\n            ")),c.push("\n        </div>\n    </a>\n</div>")}).call(this)}.call(a),a.safe=e,a.escape=f,c.join("")}}),a.register("steps/client/src/templates/history.js",function(a,b,c){c.exports=function(a){a||(a={});var b,c=[],d=a.safe,e=a.escape;return b=a.safe=function(a){if(a&&a.ecoSafe)return a;("undefined"==typeof a||null==a)&&(a="");var b=new String(a);return b.ecoSafe=!0,b},e||(e=a.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){c.push('<div class="head">\n    <a class="serialize button -steps-ui">Serialize</a>\n    <a class="hide secondary button -steps-ui" style="margin-right:10px">Hide</a>\n    <a href="/app/reset" class="button secondary -steps-ui" style="margin-right:10px">Clear</a>\n    <h1><span class="entypo flowbranch -steps-ui"></span> History</h1>\n    <p class="message">Steps you have taken will be populated here as you work with this app.</p>\n</div>\n\n<div id="tools">\n    <svg class="canvas"></svg>\n    <table class="grid"></table>\n</div>')}).call(this)}.call(a),a.safe=d,a.escape=e,c.join("")}}),a.register("steps/client/src/templates/iframe/apps-a.js",function(a,b,c){c.exports=function(a){a||(a={});var b,c=[],d=a.safe,e=a.escape;return b=a.safe=function(a){if(a&&a.ecoSafe)return a;("undefined"==typeof a||null==a)&&(a="");var b=new String(a);return b.ecoSafe=!0,b},e||(e=a.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){c.push("<!doctype html>\n<html>\n<head>\n    <meta charset=\"utf-8\" />\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge,chrome=1\">\n\n    <script src=\"/iframe/im.apps-a.bundle.js\"></script>\n</head>\n<body>\n    <script>\n    (function() {\n        var channel = new Pomme({ 'scope': 'apps-a' });\n        channel.on('load', function(name, opts) {\n            var apps = new intermine.appsA(document.location.origin);\n            apps.load(name, 'body', opts);\n        });\n    })();\n    </script>\n</body>\n</html>")}).call(this)}.call(a),a.safe=d,a.escape=e,c.join("")}}),a.register("steps/client/src/templates/iframe/imtables.js",function(a,b,c){c.exports=function(a){a||(a={});var b,c=[],d=a.safe,e=a.escape;return b=a.safe=function(a){if(a&&a.ecoSafe)return a;("undefined"==typeof a||null==a)&&(a="");var b=new String(a);return b.ecoSafe=!0,b},e||(e=a.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){c.push("<!doctype html>\n<html>\n<head>\n    <meta charset=\"utf-8\" />\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge,chrome=1\">\n    <link rel=\"stylesheet\" href=\"/iframe/im.tables.bundle.css\" />\n    <script src=\"/iframe/im.tables.bundle.js\"></script>\n</head>\n<body>\n    <script>\n    (function() {\n        var channel = new Pomme({ 'scope': 'imtables' });\n        channel.on('show', function(config) {\n            config.service = new intermine.Service({\n                'root': config.mine,\n                'token': config.token,\n                // Throwing an error here will bubble it up to the parent.\n                // Alternatively, one can trigger an `error` event to the parent.\n                errorHandler: function(err) {\n                    throw err;\n                }\n            });\n            config.type = (config.type) ? config.type : 'table';\n            $('body').imWidget(config);\n        });\n    })();\n    </script>\n</body>\n</html>")}).call(this)}.call(a),a.safe=d,a.escape=e,c.join("")}}),a.register("steps/client/src/templates/iframe/widgets.js",function(a,b,c){c.exports=function(a){a||(a={});var b,c=[],d=a.safe,e=a.escape;return b=a.safe=function(a){if(a&&a.ecoSafe)return a;("undefined"==typeof a||null==a)&&(a="");var b=new String(a);return b.ecoSafe=!0,b},e||(e=a.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){c.push("<!doctype html>\n<html>\n<head>\n    <meta charset=\"utf-8\" />\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge,chrome=1\">\n    <link rel=\"stylesheet\" href=\"/iframe/im.widgets.bundle.css\" />\n    <script src=\"/iframe/im.widgets.bundle.js\"></script>\n</head>\n<body>\n    <script>\n    (function() {\n        var channel = new Pomme({ 'scope': 'widgets' });\n        channel.on('show', function(config) {\n            var widgets = new window['list-widgets']({\n                'root': config.mine + '/service/',\n                'token': config.token\n            });\n            widgets[config.type](config.id, config.list, 'body', {});\n        });\n    })();\n    </script>\n</body>\n</html>")}).call(this)}.call(a),a.safe=d,a.escape=e,c.join("")}}),a.register("steps/client/src/templates/landing.js",function(a,b,c){c.exports=function(a){a||(a={});var b,c=[],d=a.safe,e=a.escape;return b=a.safe=function(a){if(a&&a.ecoSafe)return a;("undefined"==typeof a||null==a)&&(a="");var b=new String(a);return b.ecoSafe=!0,b},e||(e=a.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){c.push('<div id="wrapper">\n    <header id="top">\n        <div class="row">\n            <div class="first column">\n                <a href="/"><h1>InterMine Steps <span>&alpha;</span></h1></a>\n            </div>\n            <div class="second column">\n                <input id="search" type="text" placeholder="e.g. list upload, PPARG" />\n            </div>\n            <div class="third column">\n                <p>Monsieur Tout-le-Monde <span>&#8226;</span> <a href="app/reset">Reset Database</a> <span>&#8226;</span> <a>Logout</a></p>\n            </div>\n        </div>\n    </header>\n\n    <section id="middle" class="narrow container -steps-ui">\n        <div class="row -steps-ui">\n            <div class="first column -steps-ui">\n                <div class="nobox -steps-ui">\n                    <h2><span class="entypo lifebuoy -steps-ui"></span> Help</h2>\n                    <ul class="tools -steps-ui">\n                        <li><a>What is <strong>new</strong> since 1.2</a></li>\n                        <li><a>How do I use my <strong>tools</strong></a></li>\n                        <li><a>Where are my <strong>templates</strong></a></li>\n                        <li><a>How do I <strong>cite</strong> this resource</a></li>\n                    </ul>\n                </div>\n            </div>\n            <div class="second column -steps-ui">\n                <div class="box -steps-ui">\n                    <h2><span class="entypo crossroads -steps-ui"></span> Tools</h2>\n                    <!-- populate next steps here -->\n                    <div id="next"></div>\n                </div>\n            </div>\n            <div class="third column -steps-ui">\n                <div class="box -steps-ui">\n                    <table class="tabs -steps-ui">\n                        <tr>\n                            <td class="active labeled">\n                                <div>\n                                    <h3>Messages</h3><span class="count">9</span>\n                                </div>\n                            </td>\n                            <td class="inactive">\n                                <div>\n                                    <h3>Continue research</h3>\n                                </div>\n                            </td>\n                        </tr>\n                    </table>\n                    <div class="content">\n                        <ul class="timeline -steps-ui">\n                            <li>\n                                <div class="head">\n                                    <span class="ago">3m ago</span>\n                                    <span class="entypo database -steps-ui"></span><h5>System upgrade</h5>\n                                </div>\n                                <p>The system has been upgraded to the latest version <code>1.2.0</code>.</p>\n                            </li>\n                            <li>\n                                <div class="head">\n                                    <span class="ago">A day ago</span>\n                                    <span class="entypo download -steps-ui"></span><h5>Shared list</h5>\n                                </div>\n                                <p>A list <a>Secret Research Genes</a> has been shared with you.</p>\n                            </li>\n                            <li>\n                                <div class="head">\n                                    <span class="ago">Jan 27</span>\n                                    <span class="entypo database -steps-ui"></span><h5>System upgrade</h5>\n                                </div>\n                                <p>The system will go down in 30 minutes.</p>\n                            </li>\n                            <li>\n                                <div class="head">\n                                    <span class="ago">Jan 26</span>\n                                    <span class="entypo clipboard -steps-ui"></span><h5>Job finished</h5>\n                                </div>\n                                <p>Your job <a>Enriching a List</a> has finished.</p>\n                            </li>\n                        </ul>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </section>\n</div>\n\n<footer id="wide" class="-steps-ui">\n    <p>&copy; 2000-2013 InterMine, University of Cambridge</p>\n</footer>')
}).call(this)}.call(a),a.safe=d,a.escape=e,c.join("")}}),a.register("steps/client/src/templates/next-steps-header.js",function(a,b,c){c.exports=function(a){a||(a={});var b,c=[],d=a.safe,e=a.escape;return b=a.safe=function(a){if(a&&a.ecoSafe)return a;("undefined"==typeof a||null==a)&&(a="");var b=new String(a);return b.ecoSafe=!0,b},e||(e=a.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){c.push('<div class="tools"><!-- tool labels go here --></div>')}).call(this)}.call(a),a.safe=d,a.escape=e,c.join("")}}),a.register("steps/client/src/templates/next-steps.js",function(a,b,c){c.exports=function(a){a||(a={});var b,c=[],d=a.safe,e=a.escape;return b=a.safe=function(a){if(a&&a.ecoSafe)return a;("undefined"==typeof a||null==a)&&(a="");var b=new String(a);return b.ecoSafe=!0,b},e||(e=a.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){c.push('<div class="-steps-ui">\n    <div class="tools"><!-- tool labels go here --></div>\n    <a class="tiny secondary button show-truncated -steps-ui">&hellip;</a>\n    <p class="noactions">The filter matched no actions.</p>\n</div>')}).call(this)}.call(a),a.safe=d,a.escape=e,c.join("")}}),a.register("steps/client/src/templates/sidebar-right.js",function(a,b,c){c.exports=function(a){a||(a={});var b,c=[],d=a.safe,e=a.escape;return b=a.safe=function(a){if(a&&a.ecoSafe)return a;("undefined"==typeof a||null==a)&&(a="");var b=new String(a);return b.ecoSafe=!0,b},e||(e=a.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){c.push('<table class="tabs -steps-ui">\n    <tr>\n        <td class="active"><div><h3>Next Steps</h3></div></td>\n        <td class="inactive"><div><h3>Research Notes</h3></div></td>\n    </tr>\n</table>\n<div class="content">\n    <div id="continue"></div>\n</div>')}).call(this)}.call(a),a.safe=d,a.escape=e,c.join("")}}),a.register("steps/client/src/templates/tool.js",function(a,b,c){c.exports=function(a){a||(a={});var b,c=[],d=function(a){return a&&a.ecoSafe?a:"undefined"!=typeof a&&null!=a?f(a):""},e=a.safe,f=a.escape;return b=a.safe=function(a){if(a&&a.ecoSafe)return a;("undefined"==typeof a||null==a)&&(a="");var b=new String(a);return b.ecoSafe=!0,b},f||(f=a.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var a,b,e;c.push('<div class="wrap sidebar">\n    <!-- dynamically populated with event handling -->\n    <ul class="breadcrumbs -steps-ui"></ul>\n\n    <div class="head -steps-ui">\n        <h1 class="'),c.push(d(this.type)),c.push('">'),c.push(d(this.title)),c.push('</h1>\n        <em class="ago"></em>\n    </div>\n\n    <ul class="accordion -steps-ui">\n        <!-- we are hardcoding only two steps possible -->\n        '),e=["Input","Output"];for(a in e)b=e[a],c.push("\n            "),a=parseInt(a)+1,c.push('\n            <li class="'),c.push(d(this.type)),a===this.step&&c.push(" active"),a>this.step&&c.push(" inactive"),c.push('" data-step="'),c.push(d(a)),c.push('">\n                <div class="title">\n                    <!-- first step and root provided and us not on it? -->\n                    '),1===a&&a!==this.step&&this.root?(c.push('\n                        <h5><a href="/tool/id/'),c.push(d(this.root)),c.push('">'),c.push(d(b)),c.push("</a></h5>\n                    ")):(c.push("\n                        <h5>"),c.push(d(b)),c.push("</h5>\n                    ")),c.push('\n                </div>\n                <div class="content -steps-tool">Loading content &hellip;</div>\n            </li>\n        ');c.push("\n    </ul>\n</div>")}).call(this)}.call(a),a.safe=e,a.escape=f,c.join("")}}),a.register("steps/client/src/views/Action.js",function(a,b,c){var d,e,f,g,h,i,j=function(a,b){return function(){return a.apply(b,arguments)}},k={}.hasOwnProperty,l=function(a,b){function c(){this.constructor=a}for(var d in b)k.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};f=b("../core/View"),e=b("../core/Mediator"),h=b("../templates/action"),g=this,c.exports=d=function(a){function b(){return this.showHelp=j(this.showHelp,this),i=b.__super__.constructor.apply(this,arguments)}return l(b,a),b.prototype.containerMethod="html",b.prototype.autoRender=!0,b.prototype.tagName="li",b.prototype.getTemplateFunction=function(){return h},b.prototype.getTemplateData=function(){return _.extend(g.Utils.cloneDeep(this.options),{label:this.markup(this.options.label)})},b.prototype.attach=function(){var a,c=this;return b.__super__.attach.apply(this,arguments),$(this.el).addClass(function(){var a;return a=[c.options.type,c.options.labelClass,"new"],c.options.weight<10&&a.push("hidden"),a.join(" ")}),a=this.options.label.replace(/[^a-zA-Z ]/g,"").replace(/\s+/g," ").toLowerCase().split(" "),this.keywords=_.uniq(a.concat(this.options.keywords)).join(" "),this.delegate("click",".help",this.showHelp),setTimeout(function(){return $(c.el).removeClass("new")},100)},b.prototype.markup=function(a){return a=a.replace(/(\*\*|__)(?=\S)([^\r]*?\S[*_]*)\1/g,"<strong>$2</strong>"),a=a.replace(/(\*|_)(?=\S)([^\r]*?\S)\1/g,"<em>$2</em>")},b.prototype.showHelp=function(){return assert(this.options.help,"Help content is not provided"),console.log({title:this.markup(this.options.label),text:this.options.help})},b}(f)}),a.register("steps/client/src/views/App.js",function(a,b,c){var d,e,f,g,h,i,j={}.hasOwnProperty,k=function(a,b){function c(){this.constructor=a}for(var d in b)j.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};f=b("../core/View"),e=b("../core/Mediator"),h=b("../templates/app"),g=this,c.exports=d=function(a){function b(){return i=b.__super__.constructor.apply(this,arguments)}return k(b,a),b.prototype.container="body",b.prototype.containerMethod="html",b.prototype.autoRender=!0,b.prototype.getTemplateFunction=function(){return h},b.prototype.getTemplateData=function(){return{showHistory:g.Layout.showHistory}},b.prototype.attach=function(){return b.__super__.attach.apply(this,arguments),this.delegate("click",'.button[data-action="history-toggle"]',this.historyToggle),this.delegate("click","header#top h1",function(){return e.publish("router:landing")}),this.delegate("keyup","input#search",function(a){return e.publish("app:search",$(a.target).val())}),$("body").addClass("app"),this},b.prototype.historyToggle=function(a){var b;return b=$(a.target),"0"===b.attr("data-show")?(b.text("Hide history"),b.attr("data-show","1")):(b.text("Show history"),b.attr("data-show","0")),e.publish("history:toggle")},b}(f)}),a.register("steps/client/src/views/Crumb.js",function(a,b,c){var d,e,f,g,h={}.hasOwnProperty,i=function(a,b){function c(){this.constructor=a}for(var d in b)h.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};e=b("../core/View"),f=b("../templates/crumb"),c.exports=d=function(a){function b(){return g=b.__super__.constructor.apply(this,arguments)}return i(b,a),b.prototype.containerMethod="html",b.prototype.autoRender=!0,b.prototype.tagName="li",b.prototype.getTemplateFunction=function(){return f},b}(e)}),a.register("steps/client/src/views/Error.js",function(a,b,c){var d,e,f,g={}.hasOwnProperty,h=function(a,b){function c(){this.constructor=a}for(var d in b)g.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};e=b("../core/View"),c.exports=d=function(a){function c(){return f=c.__super__.constructor.apply(this,arguments)}return h(c,a),c.prototype.container="body",c.prototype.containerMethod="html",c.prototype.autoRender=!0,c.prototype.getTemplateFunction=function(){return b("../templates/error-"+this.options.template)},c}(e)}),a.register("steps/client/src/views/GenericTool.js",function(a,b,c){var d,e,f,g=function(a,b){return function(){return a.apply(b,arguments)}},h={}.hasOwnProperty,i=function(a,b){function c(){this.constructor=a}for(var d in b)h.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};e=b("../core/View"),c.exports=d=function(a){function b(){return this.updateTime=g(this.updateTime,this),f=b.__super__.constructor.apply(this,arguments)}return i(b,a),b.prototype.updateTime=function(a){var b,c,d,e,f,g,h,i,j=this;return assert(this.model&&(g=this.model.get("guid")),"Model is not set or is incomplete, cannot time update"),e=this.model.get("created"),assert(e,"Created date not provided for model `"+g+"`"),f=new Date(this.model.get("created")),assert(!isNaN(f.getTime()),"Invalid created date `"+e+"`"),d=null,i=[0,1],b=i[0],c=i[1],(h=function(){var e,g,i;return e=moment(f).fromNow(),d!==e?(g=[0,1],b=g[0],c=g[1],a.text(d=e)):(i=[c,b+c],b=i[0],c=i[1]),j.timeouts.push(setTimeout(h,1e3*c))})()},b}(e)}),a.register("steps/client/src/views/History.js",function(a,b,c){var d,e,f,g,h,i,j,k,l,m=function(a,b){return function(){return a.apply(b,arguments)}},n={}.hasOwnProperty,o=function(a,b){function c(){this.constructor=a}for(var d in b)n.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};g=b("../core/Mediator"),i=b("../core/View"),d=b("../core/Controller"),e=b("./HistoryTool"),h=b("../models/Tool"),k=b("../templates/history"),j=this,c.exports=f=function(a){function b(){return this.renderTool=m(this.renderTool,this),this.resetTable=m(this.resetTable,this),this.toggleHistory=m(this.toggleHistory,this),this.checkCollection=m(this.checkCollection,this),l=b.__super__.constructor.apply(this,arguments)}return o(b,a),b.prototype.container="#history",b.prototype.containerMethod="html",b.prototype.autoRender=!0,b.prototype.getTemplateFunction=function(){return k},b.prototype.initialize=function(){return b.__super__.initialize.apply(this,arguments),this.rows=0,this.cols=0,this.grid=[],this.guids={},g.subscribe("history:render",this.renderTool,this),g.subscribe("history:toggle",this.toggleHistory,this)},b.prototype.attach=function(){var a,c=this;return b.__super__.attach.apply(this,arguments),this.tools=$(this.el).find("#tools"),(a=function(){return c.tools.css("height",.33*$(window).height()-85)})(),$(window).resize(a),this.checkCollection(),this.delegate("click",".serialize",this.serializeHistory),this.delegate("click",".hide",this.toggleHistory),j.Layout.showHistory||$(this.el).hide(),this},b.prototype.checkCollection=function(){var a=this;return this.collection.each(function(b){var c;return c=b.get("guid"),a.guids[c]?void 0:a.renderTool(b)}),this.timeouts.push(setTimeout(this.checkCollection,1e3))},b.prototype.toggleHistory=function(){return $(this.el).fadeToggle(),j.Layout.showHistory=!j.Layout.showHistory},b.prototype.resetTable=function(){return this.rows=0,this.cols=0,d3.select($(this.el).find("svg.canvas")[0]).selectAll("*").remove(),$(this.el).find("table.grid").html("")},b.prototype.addRow=function(){var a,b,c,d,e,f,g;for(d=$(this.el).find("table.grid"),c=$("<tr/>",{"data-row":this.rows}),b=f=0,g=this.cols;g>=0?g>f:f>g;b=g>=0?++f:--f)c.append(a=$("<td/>",{"data-col":b})),null==(e=this.grid)[b]&&(e[b]=[]),this.grid[b][this.rows]=a;return d.append(c),this.rows+=1},b.prototype.addCol=function(){var a,b,c,d,e,f,g;for(c=$(this.el).find("table.grid"),b=e=0,g=this.rows;g>=0?g>e:e>g;b=g>=0?++e:--e)c.find("tr[data-row="+b+"]").append(a=$("<td/>",{"data-col":this.cols})),null==(d=this.grid)[f=this.cols]&&(d[f]=[]),this.grid[this.cols][b]=a;return this.cols+=1},b.prototype.renderTool=function(a){var b,c,d,f,g,h;return this.views.push(g=new e({model:a})),(c=a.get("parent"))?(assert(d=this.guids[c],"Parent element `"+c+"` is not rendered first"),d.col+1>=this.cols?(this.addCol(),this.grid[b=d.col+1][f=d.row].append(g.el)):(h=this.grid[b=d.col+1][f=d.row]).children().length?(this.addRow(),this.grid[b=d.col+1][f=this.rows-1].append(g.el)):h.append(g.el),this.drawConnector(d,{col:b,row:f})):(this.addRow(),this.cols<1&&this.addCol(),this.grid[b=0][f=this.rows-1].append(g.el)),this.guids[a.get("guid")]={col:b,row:f},$(this.el).find("#tools > *").css("width",120*this.cols),$(this.el).find("p.message").hide()},b.prototype.drawConnector=function(a,b){var c,d,e,f,g,h,i,j,k,l;return f=120,c=40,a?(d=function(a,b){var d,e;return d=(a+1)*f-f/2,e=(b+1)*c-c/2+5,[d,e]},k=d(a.col,a.row),g=k[0],i=k[1],l=d(b.col,b.row),h=l[0],j=l[1],assert(g&&i&&h&&j,"We do not have element position for all elements"),e=d3.select($(this.el).find("svg.canvas")[0]),e.append("svg:line").attr("class","connector").attr("x1",g).attr("x2",h).attr("y1",i).attr("y2",j),a=i,j>i&&(a=j),(b=parseInt(e.attr("height")))<a||!b?e.attr("height",a+"px"):void 0):void 0},b.prototype.serializeHistory=function(){return console.log({title:"Your history serialized",code:{src:JSON.stringify(window.History.models,null,4),lang:"json"}})},b}(i)}),a.register("steps/client/src/views/HistoryTool.js",function(a,b,c){var d,e,f,g,h,i={}.hasOwnProperty,j=function(a,b){function c(){this.constructor=a}for(var d in b)i.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};f=b("../core/Mediator"),d=b("./GenericTool"),g=b("../templates/history-tool"),c.exports=e=function(a){function b(){return h=b.__super__.constructor.apply(this,arguments)}return j(b,a),b.prototype.containerMethod="html",b.prototype.autoRender=!0,b.prototype.getTemplateFunction=function(){return g},b.prototype.getTemplateData=function(){return this.model.toJSON()},b.prototype.initialize=function(){var a=this;return b.__super__.initialize.apply(this,arguments),f.subscribe("history:activate",function(b){return a.model.get("guid")===b?$(a.el).addClass("active"):$(a.el).removeClass("active")},this),this},b.prototype.attach=function(){return b.__super__.attach.apply(this,arguments),$(this.el).attr("class",""+this.model.get("type")+" step").attr("data-id",this.model.id),this.updateTime($(this.el).find("em.ago")),this},b}(d)}),a.register("steps/client/src/views/Landing.js",function(a,b,c){var d,e,f,g,h,i,j,k,l={}.hasOwnProperty,m=function(a,b){function c(){this.constructor=a}for(var d in b)l.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};e=b("../core/Mediator"),g=b("../core/View"),f=b("./NextStepsAll"),j=b("../templates/landing"),h=b("/steps/tools/config").registry,i=this,c.exports=d=function(a){function b(){return k=b.__super__.constructor.apply(this,arguments)}return m(b,a),b.prototype.container="body",b.prototype.containerMethod="html",b.prototype.autoRender=!0,b.prototype.getTemplateFunction=function(){return j},b.prototype.attach=function(){return b.__super__.attach.apply(this,arguments),this.views.push(new f),this.delegate("keyup","input#search",function(a){return e.publish("app:search",$(a.target).val())}),$("body").removeClass("app"),this},b}(g)}),a.register("steps/client/src/views/NextSteps.js",function(a,b,c){var d,e,f,g,h,i,j,k=function(a,b){return function(){return a.apply(b,arguments)}},l={}.hasOwnProperty,m=function(a,b){function c(){this.constructor=a}for(var d in b)l.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};e=b("../core/Mediator"),g=b("../core/View"),d=b("./Action"),i=b("../templates/next-steps"),h=this,c.exports=f=function(a){function b(){return this.showHidden=k(this.showHidden,this),this.filterLabels=k(this.filterLabels,this),this.add=k(this.add,this),j=b.__super__.constructor.apply(this,arguments)}return m(b,a),b.prototype.containerMethod="html",b.prototype.autoRender=!0,b.prototype.tagName="div",b.prototype.getTemplateFunction=function(){return i},b.prototype.initialize=function(){var a=this;return b.__super__.initialize.apply(this,arguments),this.context=[],assert(this.place,"Placement for these NextSteps not defined"),e.subscribe("context:render",function(b,c,d){return a.place===b?a.add(d):void 0},this)},b.prototype.attach=function(){var a;return b.__super__.attach.apply(this,arguments),this.list={children:{},entries:a=$("<ul/>",{"class":"tools -steps-ui"})},$(this.el).find("div.tools").append(a),e.publish("context:new"),e.subscribe("app:search",this.filterLabels,this),this.delegate("click",".show-truncated",this.showHidden),this.noActions=$(this.el).find("p.noactions")},b.prototype.add=function(){var a,b,c,e,f,g,h,i,j,k;switch(assert(this.method,"We do not know which linking `method` to use"),arguments.length){case 1:g=arguments[0];break;case 2:b=arguments[0],g=arguments[1],assert(b&&b instanceof Array,"Context not a list");break;default:assert(!1,"Incorrect number of parameters")}if($(this.el).find("input.filter").show(),h="continue"===this.method&&g.guid?"continue/"+g.guid:"new",g.category&&g.category instanceof Array){c=this.list,i=$(this.el).find("div.tools"),k=g.category;for(e in k)a=k[e],c=c.children,c[a]||(i.append($("<h4/>",{html:a,"class":"size-"+e})),c[a]={children:{},entries:f=$("<ul/>",{"class":"tools size-"+e+" -steps-ui"})},i.append(f)),c=c[a]}else c=this.list;return!function(a){var b,c,d;for(c=0,d=a.length;d>c;c++)if(b=a[c],b.options.label===g.label)return!0;return!1}(this.views)&&(this.views.push(j=new d(_.extend(g,{suffix:h,keywords:g.keywords||[],labelClass:this.labelClass||""}))),c.entries.append(j.el),g.weight<10)?$(this.el).find(".show-truncated").show():void 0},b.prototype.filterLabels=function(a){var b=this;return assert("string"==typeof a,"Query input not provided"),null!=this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout(function(){var c,d,e,f,g,i,j,k,l;if(b.showHidden(),a=_.uniq($.trim(a.replace(/[^a-zA-Z ]/g,"").replace(/\s+/g," ").toLowerCase()).split(" ")),!h.Utils.arrayEql(a,b.query))for(b.query=a,d=new RegExp(function(){var b,d,e;for(e=[],b=0,d=a.length;d>b;b++)c=a[b],e.push(""+c+".*");return e}().join("|"),"i"),k=b.views,f=0,i=k.length;i>f;f++)e=k[f],e.keywords.match(d)?$(e.el).show():$(e.el).hide();if(0!==b.views.length){for(b.noActions.hide(),l=b.views,g=0,j=l.length;j>g;g++)if(e=l[g],$(e.el).is(":visible"))return;return b.noActions.show()}},0)},b.prototype.showHidden=function(a){return a?$(a.target).remove():$(this.el).find(".show").remove(),$(this.el).find(".hidden").removeClass("hidden")},b}(g)}),a.register("steps/client/src/views/NextStepsAll.js",function(a,b,c){var d,e,f,g,h={}.hasOwnProperty,i=function(a,b){function c(){this.constructor=a}for(var d in b)h.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};d=b("../core/Mediator"),f=b("./NextSteps"),c.exports=e=function(a){function b(){return g=b.__super__.constructor.apply(this,arguments)}return i(b,a),b.prototype.container="#next",b.prototype.method="new",b.prototype.place="home",b}(f)}),a.register("steps/client/src/views/NextStepsHeader.js",function(a,b,c){var d,e,f,g,h,i={}.hasOwnProperty,j=function(a,b){function c(){this.constructor=a}for(var d in b)i.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};d=b("../core/Mediator"),f=b("./NextSteps"),g=b("../templates/next-steps-header"),c.exports=e=function(a){function b(){return h=b.__super__.constructor.apply(this,arguments)}return j(b,a),b.prototype.container="#always-on",b.prototype.method="new",b.prototype.place="header",b.prototype.labelClass="button -steps-ui",b.prototype.getTemplateFunction=function(){return g},b}(f)}),a.register("steps/client/src/views/NextStepsRight.js",function(a,b,c){var d,e,f,g,h={}.hasOwnProperty,i=function(a,b){function c(){this.constructor=a}for(var d in b)h.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};d=b("../core/Mediator"),f=b("./NextSteps"),c.exports=e=function(a){function b(){return g=b.__super__.constructor.apply(this,arguments)}return i(b,a),b.prototype.container="#continue",b.prototype.method="continue",b.prototype.place="right",b}(f)}),a.register("steps/client/src/views/RightSidebar.js",function(a,b,c){var d,e,f,g,h,i={}.hasOwnProperty,j=function(a,b){function c(){this.constructor=a}for(var d in b)i.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};f=b("../core/View"),d=b("./NextStepsRight"),g=b("../templates/sidebar-right"),c.exports=e=function(a){function b(){return h=b.__super__.constructor.apply(this,arguments)}return j(b,a),b.prototype.container="aside#right",b.prototype.containerMethod="html",b.prototype.autoRender=!0,b.prototype.getTemplateFunction=function(){return g},b.prototype.attach=function(){return b.__super__.attach.apply(this,arguments),this.views.push(new d),this},b}(f)}),a.register("steps/client/src/views/Tool.js",function(a,b,c){var d,e,f,g,h,i,j,k=function(a,b){return function(){return a.apply(b,arguments)}},l={}.hasOwnProperty,m=function(a,b){function c(){this.constructor=a}for(var d in b)l.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};f=b("../core/Mediator"),g=b("../models/Tool"),e=b("./GenericTool"),d=b("./Crumb"),i=this,c.exports=h=function(a){function c(){return this.checkCrumbs=k(this.checkCrumbs,this),j=c.__super__.constructor.apply(this,arguments)}return m(c,a),c.prototype.container="#widget",c.prototype.containerMethod="html",c.prototype.autoRender=!0,c.prototype.getTemplateFunction=function(){return b("../templates/tool")},c.prototype.getTemplateData=function(){var a,b,c;return a=_.extend(this.model.toJSON(),{step:this.step}),this.options.previous&&(a=_.extend(a,{previous:null!=(c=this.options.previous)?c.data:void 0})),!(b=this.options.extra)||b instanceof Array||(this.options.extra=b.split(",")),null!=a.locked&&(a.root=i.History.models.slice(-1)[0].attributes.guid),a},c.prototype.initialize=function(){var a;return c.__super__.initialize.apply(this,arguments),!(a=this.options.extra)||a instanceof Array||(this.options.extra=a.split(",")),this.step=this.options.step||1},c.prototype.attach=function(){var a,d;return c.__super__.attach.apply(this,arguments),this.crumbs=[],d=this.model.get("name"),assert(d,"Name of the tool is not provided"),a=$(this.el).find("ul.accordion li[data-step='"+this.step+"'] div.content"),a.html(b("/steps/tools/"+d+"/step-"+this.step)(this.getTemplateData())),this.checkCrumbs(),null!=this.model.get("locked")&&this.updateTime($(this.el).find("em.ago")),this},c.prototype.disposeIframe=function(){return this.intervals&&this.intervals instanceof Array&&_.map(this.intervals,clearInterval),this.pomme?this.pomme.dispose():void 0},c.prototype.dispose=function(){return this.disposeIframe(),c.__super__.dispose.apply(this,arguments)},c.prototype.checkCrumbs=function(){var a,b,c,e,f,g,h,j,k,l,m,n,o,p=this;if(a=i.History,0!==a.length&&(g=a.models.slice(-3),e=function(){var a,b,c;for(c=[],a=0,b=g.length;b>a;a++)f=g[a],c.push(f.get("guid"));return c}(),!i.Utils.arrayEql(this.crumbs,e))){for(this.crumbs=e,c=$(this.el).find("ul.breadcrumbs"),o=this.views,k=0,m=o.length;m>k;k++)h=o[k],h.dispose();for(c.html(""),j=function(a){var b;return c.show(),p.views.push(b=new d({model:a})),c.append(b.el)},l=0,n=g.length;n>l;l++)b=g[l],j(b)}return this.timeouts.push(setTimeout(this.checkCrumbs,1e3))},c.prototype.getDOM=function(){return $(this.el).find("ul.accordion > li.active > div.content")},c.prototype.channel=function(a){var c,d=this;return c=b("../templates/iframe/"+a.scope),this.disposeIframe(),$(a.target).empty(),this.pomme=new Pomme(_.extend(a,{template:c})),this.pomme.on("error",function(a){throw"Pomme.js iframe error: "+a}),null==this.intervals&&(this.intervals=[]),this.intervals.push(setInterval(function(){var a,b;return(a=d.pomme.iframe.el.document.body)?(b=a.scrollHeight,d.pomme.iframe.node.style.height=""+b+"px"):void 0},100)),this.pomme},c}(e)}),a.register("steps/tools/ChooseListTool/Model.js",function(a,b,c){var d,e,f,g={}.hasOwnProperty,h=function(a,b){function c(){this.constructor=a}for(var d in b)g.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};e=b("/steps/client/src/models/Tool"),c.exports=d=function(a){function b(){return f=b.__super__.constructor.apply(this,arguments)}return h(b,a),b.prototype.defaults={slug:"choose-list-tool",name:"ChooseListTool",title:"Choose a List",description:"Use an existing list",type:"goldentainoi"},b}(e)}),a.register("steps/tools/ChooseListTool/View.js",function(a,b,c){var d,e,f,g,h,i,j={}.hasOwnProperty,k=function(a,b){function c(){this.constructor=a}for(var d in b)j.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};e=b("/steps/client/src/core/Mediator"),f=b("/steps/client/src/views/Tool"),g=b("../config").config,h=this,c.exports=d=function(a){function b(){return i=b.__super__.constructor.apply(this,arguments)}var c;return k(b,a),c=function(a){var b,c;return c=a.type,b=a.name,{from:c,select:["*"],constraints:[[c,"IN",b]]}},b.prototype.attach=function(){var a,d,f,h,i,j;switch(b.__super__.attach.apply(this,arguments),i=this,this.step){case 1:h={mine:g.mine,token:g.token,cb:function(a,b,c){if(a)throw a;return c?(i.model.set("data",{list:c}),e.publish("history:add",i.model)):void 0}},h.provided={selected:null!=(j=this.model.get("data"))?j.list.name:void 0,hidden:["temp"]},a=this.channel({target:".iframe.app.container",scope:"apps-a"}),a.trigger("load","choose-list",h);break;case 2:d=this.model.get("guid"),f=this.model.get("data").list,h=_.extend({},g,{type:"minimal",query:c(f),events:{"imo:click":function(a,b){return e.publish("context:new",["have:list","type:"+a,"have:one"],d,b)}}}),a=this.channel({target:".iframe.app.container",scope:"imtables"}),a.trigger("show",h),e.publish("context:new",["have:list","type:"+f.type],d)}return this},b}(f)}),a.register("steps/tools/ChooseListTool/step-1.js",function(a,b,c){c.exports=function(a){a||(a={});var b,c=[],d=a.safe,e=a.escape;return b=a.safe=function(a){if(a&&a.ecoSafe)return a;("undefined"==typeof a||null==a)&&(a="");var b=new String(a);return b.ecoSafe=!0,b},e||(e=a.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){c.push('<div class="iframe app container"></div>')}).call(this)}.call(a),a.safe=d,a.escape=e,c.join("")}}),a.register("steps/tools/ChooseListTool/step-2.js",function(a,b,c){c.exports=function(a){a||(a={});var b,c=[],d=a.safe,e=a.escape;return b=a.safe=function(a){if(a&&a.ecoSafe)return a;("undefined"==typeof a||null==a)&&(a="");var b=new String(a);return b.ecoSafe=!0,b},e||(e=a.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){c.push('<div class="iframe app container"></div>')}).call(this)}.call(a),a.safe=d,a.escape=e,c.join("")}}),a.register("steps/tools/ListWidgetTool/Model.js",function(a,b,c){var d,e,f,g={}.hasOwnProperty,h=function(a,b){function c(){this.constructor=a}for(var d in b)g.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};e=b("/steps/client/src/models/Tool"),c.exports=d=function(a){function b(){return f=b.__super__.constructor.apply(this,arguments)}return h(b,a),b.prototype.defaults={slug:"list-widget-tool",name:"ListWidgetTool",title:"List Widget",description:"Show a List Widget",type:"kimberly"},b}(e)}),a.register("steps/tools/ListWidgetTool/View.js",function(a,b,c){var d,e,f,g,h,i,j={}.hasOwnProperty,k=function(a,b){function c(){this.constructor=a}for(var d in b)j.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};e=b("/steps/client/src/core/Mediator"),f=b("/steps/client/src/views/Tool"),g=b("../config").config,h=this,c.exports=d=function(a){function b(){return i=b.__super__.constructor.apply(this,arguments)}return k(b,a),b.prototype.attach=function(){var a,c,d,f,h,i,j,k,l,m,n,o,p,q,r;switch(b.__super__.attach.apply(this,arguments),j=this,this.step){case 1:if(i=function(a){return setTimeout(function(){return j.model.set("data",a),e.publish("history:add",j.model)},0)},(c=null!=(m=this.options)?null!=(n=m.previous)?n.data:void 0:void 0)&&(null!=(o=this.options)?o.extra:void 0))switch(p=this.options.extra,k=p[0],d=p[1],this.options.previous.name){case"ResolveIdsTool":i({widget:{type:k,id:d},list:{name:c.list}});break;case"ChooseListTool":i({widget:{type:k,id:d},list:c.list});break;default:throw"We do not know this incoming tool yet, fix it."}h={mine:g.root,token:g.token,cb:function(a,b,c){if(a)throw a;return c?i(_.extend({},j.model.get("data"),{list:c})):void 0}},h.provided={selected:null!=(q=this.model.get("data"))?q.list.name:void 0,hidden:["temp"]},a=this.channel({target:".iframe.app.container",scope:"apps-a"}),a.trigger("load","choose-list",h);break;case 2:r=this.model.get("data"),l=r.widget,f=r.list,h=_.extend({},l,{mine:g.mine,token:g.token,list:f.name}),a=this.channel({target:".iframe.app.container",scope:"widgets"}),a.trigger("show",h)}return this},b}(f)}),a.register("steps/tools/ListWidgetTool/step-1.js",function(a,b,c){c.exports=function(a){a||(a={});var b,c=[],d=a.safe,e=a.escape;return b=a.safe=function(a){if(a&&a.ecoSafe)return a;("undefined"==typeof a||null==a)&&(a="");var b=new String(a);return b.ecoSafe=!0,b},e||(e=a.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){c.push('<div class="iframe app container"></div>')}).call(this)}.call(a),a.safe=d,a.escape=e,c.join("")}}),a.register("steps/tools/ListWidgetTool/step-2.js",function(a,b,c){c.exports=function(a){a||(a={});var b,c=[],d=a.safe,e=a.escape;return b=a.safe=function(a){if(a&&a.ecoSafe)return a;("undefined"==typeof a||null==a)&&(a="");var b=new String(a);return b.ecoSafe=!0,b},e||(e=a.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){c.push('<div class="iframe app container"></div>')}).call(this)}.call(a),a.safe=d,a.escape=e,c.join("")}}),a.register("steps/tools/ResolveIdsTool/Model.js",function(a,b,c){var d,e,f,g={}.hasOwnProperty,h=function(a,b){function c(){this.constructor=a}for(var d in b)g.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};e=b("/steps/client/src/models/Tool"),c.exports=d=function(a){function b(){return f=b.__super__.constructor.apply(this,arguments)}return h(b,a),b.prototype.defaults={slug:"resolve-ids-tool",name:"ResolveIdsTool",title:"Resolve identifiers to a List",description:"Upload a list of identifiers",type:"strikemaster"},b}(e)}),a.register("steps/tools/ResolveIdsTool/View.js",function(a,b,c){var d,e,f,g,h,i,j={}.hasOwnProperty,k=function(a,b){function c(){this.constructor=a}for(var d in b)j.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};d=b("/steps/client/src/core/Mediator"),f=b("/steps/client/src/views/Tool"),g=b("../config").config,h=this,c.exports=e=function(a){function b(){return i=b.__super__.constructor.apply(this,arguments)}var c;return k(b,a),c=function(a){var b,c,d;return b=a.input,c=a.list,d=a.query,{from:b.type,select:["*"],constraints:[[b.type,"IN",c]]}},b.prototype.attach=function(){var a,e,f,h,i,j;switch(b.__super__.attach.apply(this,arguments),i=this,this.step){case 1:h={mine:g.mine,token:g.token,type:"many",cb:function(a,b,c){if(a)throw a;return c&&c.query?(i.model.set("data",c),d.publish("history:add",i.model)):void 0}},h.provided=(null!=(j=this.model.get("data"))?j.input:void 0)||{},a=this.channel({target:".iframe.app.container",scope:"apps-a"}),a.trigger("load","identifier-resolution",h);break;case 2:f=this.model.get("guid"),e=this.model.get("data"),h=_.extend({},g,{type:"minimal",query:c(e),events:{"imo:click":function(a,b){return d.publish("context:new",["have:list","type:"+a,"have:one"],f,b)}}}),a=this.channel({target:".iframe.app.container",scope:"imtables"}),a.trigger("show",h),d.publish("context:new",["have:list","type:"+e.input.type],f)
}return this},b}(f)}),a.register("steps/tools/ResolveIdsTool/step-1.js",function(a,b,c){c.exports=function(a){a||(a={});var b,c=[],d=a.safe,e=a.escape;return b=a.safe=function(a){if(a&&a.ecoSafe)return a;("undefined"==typeof a||null==a)&&(a="");var b=new String(a);return b.ecoSafe=!0,b},e||(e=a.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){c.push('<div class="iframe app container"></div>')}).call(this)}.call(a),a.safe=d,a.escape=e,c.join("")}}),a.register("steps/tools/ResolveIdsTool/step-2.js",function(a,b,c){c.exports=function(a){a||(a={});var b,c=[],d=a.safe,e=a.escape;return b=a.safe=function(a){if(a&&a.ecoSafe)return a;("undefined"==typeof a||null==a)&&(a="");var b=new String(a);return b.ecoSafe=!0,b},e||(e=a.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){c.push('<div class="iframe app container"></div>')}).call(this)}.call(a),a.safe=d,a.escape=e,c.join("")}}),a.register("steps/tools/config.js",function(a){a.config={mine:"http://www.flymine.org/release-38.0",token:"n1s3AaY1DcXbj3X740S5qbAMzYU"},a.registry=[{slug:"resolve-ids-tool",help:"Upload & resolve a list of identifiers",labels:[{label:"Upload list",weight:10,place:"header",keywords:["list","resolve","identifiers","upload"]},{label:"Upload a new list",weight:10,place:"home",keywords:["list","resolve","identifiers","upload"]}]},{slug:"choose-list-tool",help:"Choose an existing list",labels:[{label:"Choose list",weight:10,place:"header",keywords:["list"]},{label:"Choose an existing list",weight:10,place:"home",keywords:["list"]}]},{slug:"list-widget-tool",labels:[{label:"Gene Expression in the Fly (FlyAtlas)",weight:10,context:["have:list","type:Gene"],place:"right",category:["Category 1"],extra:["chart","flyatlas_for_gene"]},{label:"mRNA subcellular localisation (fly-FISH)",weight:10,context:["have:list","type:Gene"],place:"right",category:["Category 1"],extra:["chart","flyfish"]},{label:"BDGP expression patterns",weight:10,context:["have:list","type:Gene"],place:"right",category:["Category 1"],extra:["chart","bdgp"]},{label:"MiRNA Enrichment",weight:10,context:["have:list","type:Gene"],place:"right",category:["Category 1"],extra:["enrichment","miranda_enrichment"]},{label:"Gene Ontology Enrichment",weight:10,context:["have:list","type:Gene"],place:"right",category:["Category 1"],extra:["enrichment","go_enrichment_for_gene"]},{label:"Protein Domain Enrichment",weight:10,context:["have:list","type:Gene"],place:"right",category:["Category 1"],extra:["enrichment","prot_dom_enrichment_for_gene"]},{label:"BDGP Enrichment",weight:10,context:["have:list","type:Gene"],place:"right",category:["Category 1"],extra:["enrichment","bdgp_enrichment"]},{label:"Publication Enrichment",weight:10,context:["have:list","type:Gene"],place:"right",category:["Category 1"],extra:["enrichment","publication_enrichment"]},{label:"Pathway Enrichment",weight:10,context:["have:list","type:Gene"],place:"right",category:["Category 1"],extra:["enrichment","pathway_enrichment"]},{label:"Orthologues",weight:10,context:["have:list","type:Gene"],place:"right",category:["Category 1"],extra:["table","orthologues"]},{label:"Chromosome Distribution",weight:10,context:["have:list","type:Gene"],place:"right",category:["Category 1"],extra:["chart","chromosome_distribution_for_gene"]}]}]})}();var b=a("steps/client/src/initialize.js"),c=this;"undefined"!=typeof define&&define.amd?define("steps",[],function(){return b}):"undefined"!=typeof module&&module.exports?module.exports=b:c.steps=b,a.alias("steps/client/src/initialize.js","steps/index.js"),c.require="undefined"!=typeof c.require?c.require:a}();