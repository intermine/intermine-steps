/** ============== Functions ============== */

@import 'nib'

/** ============== Vars ============== */

$colors = (terracotta #E2674A) (goldentainoi #FFCC66) (curiousblue #3399CC) (turq #33CCCC) (strikemaster #996699) (crail #C24747) (deyork #99CC99) (patina #669999) (hopbush #CC6699) (seagrn #339966) (kimberly #666699)
$entypo = (lock "\1f512") (backintime "\e771") (lightup "\1f506") (rightopen "\e762") (clippy "\1f4ce") (crossroads "\e723") (flowbranch "\1F569") (openbook "\1f4d6") (lifebuoy "\e788") (comment "\e718") (help "\2753") (database "\1F4F8") (clipboard "\1F4CB") (download "\1F4E5") (popup "\E74C") (cog "\2699")
$text_color = #68718A
$link_color = #579ED7
$border_color = #BCCAD5
$table_border = #E0E3ED

/** ============== Fonts ============== */

@font-face {
    font-family: 'Lato'
    font-style: normal
    font-weight: 700
    src: url('../fonts/LatoBold.woff') format('woff'),
    url('../fonts/LatoBold.ttf') format('truetype')
}

@font-face {
    font-family: 'Lato'
    font-style: normal
    font-weight: 400
    src: url('../fonts/LatoRegular.woff') format('woff'),
    url('../fonts/LatoRegular.ttf') format('truetype')
}

@font-face {
    font-family: 'Entypo'
    font-style: normal
    font-weight: 400
    src: url('../fonts/Entypo.woff') format('woff'),
    url('../fonts/Entypo.eot') format('eot'),
    url('../fonts/Entypo.ttf') format('truetype'),
    url('../fonts/Entypo.svg') format('svg')
}

/** ============== Generic styles ============== */

body, html
    height: 100%

body
    margin: 0
    -webkit-font-smoothing: antialiased
    background: #F0F0F0

    // // on app pages
    // &.app
    //     background: #DADEE9 url('../img/bg.png') repeat-y top left

body, h1, h2, h3, h4, p, li, table thead tr th, table tbody tr td
    font-family: Lato
    color: $text_color

a
    cursor: pointer
    color: $link_color

    &:hover
        color: darken($link_color, 30%)

table
    width: 100%

label
    cursor: default

.label
    border-radius: 2px
    font-weight: normal
    background: linear-gradient(rgba($text_color, 0.15), rgba($text_color, 0.4))
    color: $text_color
    text-shadow: -1px -1px rgba(255,255,255,0.3)
    box-shadow: inset 1px 1px 3px rgba($text_color, 0.2)
    border: 1px solid rgba($text_color, 0.3)

code
    font-size: 10px
    background: inherit

p
    margin: 0

    code
        font-weight: normal
        font-size: 11px

::-webkit-input-placeholder
    color: lighten(#5b617d, 50%)

input[type="checkbox"]
    cursor: pointer

input.filter
    display: none

.help, .help:before
    color: rgba(0,0,0,0.2)
    cursor: pointer

div.panel
    border-radius: 2px
    border: 1px solid $border_color

.button
    background: linear-gradient(#71B9EC, #54A1E7)
    border-color: #5FA4DE
    border-radius: 2px
    font-size: 12px
    text-transform: uppercase
    text-shadow: 1px 1px rgba(0,0,0,0.25)

    &.secondary
        background: linear-gradient(#FAFBFD, #E8ECF1)
        border-color: #BFCFDA
        color: #838B9F
        text-shadow: 1px 1px #FFF

table
    margin: 0

table.table
    border-collapse: collapse
    border: 0

    tbody
        border: 1px solid $table_border
        border-left: 3px solid $table_border

    tr
        th
            background: #FFF
            border-bottom: 1px solid $table_border

        &:nth-child(odd)
            td
                border-bottom: 1px solid $table_border

        &:nth-child(even)
            td
                background: #F5F6F9

table.tabs
    background: inherit
    border: 0
    border-collapse: collapse

    td
        padding: 0
        vertical-align: bottom
        height: 38px

        div
            height: 100%
            cursor: pointer
            position: relative

            &:before
                display: inline-block
                content: ""
                width: 100%
                height: 5px
                position: absolute
                top: 0
                left: 0

            h3
                text-transform: uppercase
                font-weight: bold
                margin: 0 15px
                padding-top: 15px

        &.labeled
            div
                padding-right: 15px

                .count
                    text-shadow: -1px -1px rgba(0,0,0,0.2)
                    position: absolute
                    top: 12px
                    right: 10px
                    background: #5AA4E0
                    box-shadow: inset 0 1px 2px rgba(0,0,0,0.25)
                    border-radius: 2px
                    color: #FFF
                    padding: 0 6px 1px 6px

        &.active
            border-right: 1px solid #CAD6DF
            border-bottom-color: #F5F6F9

            div
                h3
                    color: $text_color
                
                &:before
                    background: linear-gradient(#74BCF0, #56A7EC)
                    border-right: 1px solid #7C98AB

        &.inactive
            box-shadow: inset 2px 1px 5px 0 rgba(0,0,0,0.1)
            background: linear-gradient(#F7F9FD, #ECEEF3)
            border-bottom: 1px solid #CAD6DF

            div
                h3
                    color: #A7B4C7
                    text-shadow: 1px 1px rgba(255,255,255,0.5)

                &:before
                    background: linear-gradient(#AFBED4, #A3B4CE)

// used on showing a listing of tools
ul.tools
    //list-style-type: none

    li
        margin: 0 -10px

        for clr in $colors
            &.{clr[0]}
                a:before
                    background: clr[1]

        span.entypo
            position: relative
            z-index: 1
            margin-right: 5px

        a
            cursor: pointer
            color: #5B617D
            text-shadow: 1px 1px rgba(255,255,255,0.5)
            display: block
            padding: 0
            border-top: 1px solid transparent
            border-bottom: 1px solid transparent
            transition: color 100ms ease-out
            position: relative
            padding: 0 10px 0 24px

            &:before
                display: block
                content: ""
                width: 5px
                height: 5px
                position: absolute
                top: 9px
                left: 10px
                background: #5b617d

            &:hover
                background: linear-gradient(#8AC8F1, #59A6E8)
                border-top: 1px solid #5FA4DE
                border-bottom: 1px solid #4D93D8
                color: #FFF
                text-shadow: 1px 1px #4D93D8
                box-shadow: inset 0 0 2px 0 rgba(255,255,255,0.5)

ul.timeline
    margin: 0

    li
        padding: 8px 15px
        position: relative

        &:nth-child(even)
            background: #F5F6F9
            box-shadow: inset 0 1px 0 rgba(255,255,255,0.7)

        &:not(:last-child)
            border-bottom: 1px solid #DBE7EF

        &.scooter
            background: rgba(#2EC6C8, 0.05)

            a
                color: darken(#2EC6C8, 20%)

        .head
            h5
                margin: 0
                font-size: 14px
                display: inline-block
                color: rgba($text_color, 0.9)

            span
                &.ago
                    font-size: 12px
                    color: rgba($text_color, 0.7)

                &.entypo
                    display: inline-block
                    margin-right: 4px
                    color: rgba($text_color, 0.7)

        p
            margin: 0

.noactions
    display: none
    font-size: 13px
    font-style: italic

.popup
    font-size: 10px
    padding: 0px 4px
    border-radius: 2px
    position: absolute
    top: 7px
    right: 5px
    background: linear-gradient(#fafbfd, #e8ecf1)
    border: 1px solid #BFCFDA
    color: #838B9F
    text-shadow: 1px 1px #FFF
    cursor: pointer
    opacity: 0.75

    &:hover
        opacity: 1

.row
    width: auto
    min-width: 0

/** ============== Elements ============== */

div#wrapper
    width: 100%
    min-width: 1000px
    min-height: 100%

header#top
    width: 100%
    color: #97a5b8
    background: linear-gradient(#455B7C, #3D516E)
    border-bottom: 1px solid #34455E
    box-shadow: 0 0 1px 1px #888
    text-shadow: -1px -1px rgba(0,0,0,0.2)

    .row
        width: 1000px

    a
        color: #FFF

    .first
        a
            color: inherit

        h1
            margin: 0
            padding: 10px 0 10px 10px
            font-size: 20px
            line-height: 30px
            color: #FFF
            text-shadow: 1px 1px rgba(0,0,0,0.3)

            span
                font-weight: normal

    .second
        vertical-align: top

        input#search
            margin: 10px 10px 10px 0
            width: 100%
            float: left

        #always-on
            float: left

            h4, .button.show, p.noactions
                display: none

            ul.tools
                list-style-type: none
                margin: 14px 0

                li
                    margin: 0
                    display: inline-block

                    span.entypo
                        display: none

                    a
                        white-space: nowrap
                        text-shadow: none
                        padding-right: 25px

                        &:hover
                            border-radius: 2px

                    &.button
                        padding: 0

                        a, a:hover
                            padding: 6px 15px 6px 25px
                            background: none
                            border: 0
                            text-shadow: 1px 1px rgba(0,0,0,0.25)
                            box-shadow: none
                            border-radius: 0

    .third
        text-align: right
        line-height: 30px
        padding: 10px

        span
            display: inline-block
            margin: 0 4px
            font-size: 8px
            height: 18px

// only on app pages
body.app
    header#top
        .first, .second, .third
            display: inline-block

        // .first
        //     width: 272px

        .second
            padding-left: 20px
            // border-left: 1px solid rgba(0,0,0,0.25)

            input#search
                width: 400px

        .third
            float: right
            width: 250px

section#middle
    position: relative

    &:after
        content: '.'
        display: block
        clear: both
        visibility: hidden
        height: 0

    &.narrow div.row
        width: 1000px

    div.row
        margin-top: 20px

        h2
            font-size: 20px

        h4
            font-size: 16px
            margin: 0
            margin-bottom: 5px

        ul
            list-style-type: none


    .hidden
        display: none !important

    .box
        background: #FEFEFE
        border-radius: 2px
        border: 1px solid $border_color
        box-shadow: -3px 3px 3px rgba(0,0,0,0.05)

        h2
            margin: 0
            padding: 4px 15px
            border-radius: 2px 2px 0 0
            background: linear-gradient(#f6f8fc, #eceef3)
            border-bottom: 1px solid #cbd8e2

        h3
            text-transform: uppercase
            font-size: 12px

        div.tools
            padding: 15px

            ul.tools
                margin: 0

                for size in 0...10
                    &.size-{size}
                        margin-left: size * 10 px                

            h4
                margin-bottom: 10px

                &:not(:first-child)
                    margin-top: 10px

                for size in 0...10
                    &.size-{size}
                        font-size: 16 - (size * 3) px
                        margin-left: size * 10 px

                        if size isnt 0
                            font-weight: normal

        .noactions
            margin: -15px 15px 15px 15px

        .content
            border-radius: 0 0 2px 2px 

    .nobox
        h2
            margin-top: 0


    aside
        position: absolute
        top: 0
        width: 250px

        &#left
            left: 0
            width: 275px

        &#right
            background: #F5F6F9
            border-radius: 2px
            top: 20px
            right: 20px
            border: 1px solid $border_color
            box-shadow: -3px 3px 3px rgba(0,0,0,0.05)

            .content
                padding: 10px 15px
                border-radius: 0 0 2px 2px

        &#left
            p, h3, h4, ul, input.filter, .button.show
                margin: 10px

            h3
                margin: 20px 10px

        h3
            text-transform: uppercase
            font-size: 12px

        h4
            font-size: 14px
            color: #5B617D

        ul
            list-style-type: none
            padding: 0

            li
                background-repeat: no-repeat
                background-position: 0 3px

    div#widget
        overflow: hidden
        margin-top: 1px
        padding-bottom: 5px

        ul.list, ol.list
            a
                cursor: pointer

        ul.list
            list-style-type: none

        ul.breadcrumbs
            list-style-type: none
            display: none
            background: linear-gradient(#FFF, #F4F6FB)
            border: 0
            border-bottom: 1px solid #CBD8E2
            margin: 0
            padding-left: 20px
            font-weight: bold

            li
                display: inline-block
                padding: 0

                &::before
                    content: ""

                a
                    cursor: pointer
                    padding: 0 4px

        div.head
            background: $table_border
            box-shadow: inset 0 3px 5px rgba(0,0,0,0.03)

            h1
                font-size: 22px
                float: left
                margin: 20px
                margin-right: 10px
                text-shadow: 1px 1px rgba(255,255,255,0.8)

                &:before
                    content: ''
                    width: 10px
                    height: 10px
                    display: inline-block
                    border: 4px solid #FFF
                    margin-right: 10px
                    box-shadow: 1px 1px 2px rgba(0,0,0,0.15)

                for clr in $colors
                    &.{clr[0]}:before
                        background: clr[1]

            .entypo
                float: left
                margin: 24px 0 0 20px

            em.ago
                float: left
                margin: 29px 0 0 0

            &:after
                content: ""
                display: block
                clear: both

        h2
            font-size: 18px

        .wrap
            border-radius: 4px
            // margin: 20px 295px
            // margin-bottom: 0
            margin: 20px 295px 0 20px
            padding: 0
            border: 1px solid $border_color
            box-shadow: -3px 3px 3px rgba(0,0,0,0.05)
            position: relative

        .half
            float: left
            width: 50%

        ul.accordion
            margin: 0
            border: 0
            
            > li
                list-style: none;
                margin: 0;
                padding: 0;
                border-top: 1px solid #CBD8E2
                
                &:last-child
                    > div.title
                        border-radius: 0 0 2px 2px
                        padding-bottom: 17px

                > div.title
                    background: #f6f6f6
                    padding: 15px
                    margin: 0
                    position: relative
                    transition: 0.15s background linear
                    
                    h1, h2, h3, h4, h5
                        margin: 0;
                    
                    &:after
                        //content: ""
                        display: block
                        width: 0
                        height: 0
                        border: solid 6px
                        border-color: transparent #9d9d9d transparent transparent
                        position: absolute
                        right: 15px
                        top: 21px;
                
                .content
                    display: none
                    padding: 15px
        
                &:not(.active)
                    .title
                        background: linear-gradient(#F6F8FC, #ECEEF3)

                &.active
                    border-top: 1px solid $border_color

                    .title
                        background: white
                        padding-top: 13px
                        
                        &:after
                            //content: ""
                            display: block
                            width: 0
                            height: 0
                            border: solid 6px
                            border-color: #9d9d9d transparent transparent transparent
        
                    .content
                        background: #FFF
                        display: block

    code#example
        overflow: hidden
        display: block
        line-height: 14px
        font-size: 11px

    .description
        p
            margin: 10px 0 5px 0

        dl
            margin-top: 10px

            dt
                font-size: 11px
                font-family: monospace
                margin-bottom: 5px

            dd
                padding-left: 20px
                line-height: 16px

                &:not(:last-child)
                    margin-bottom: 15px

div#history
    position: absolute
    bottom: 0
    // left: 275px
    width: 100%
    height: 33%
    background: #FFF
    border-top: 1px solid #BCCAD5
    box-shadow: -10px 0 10px rgba(0,0,0,0.2)

    div.container
        background: #FFF
        margin-left: 20px
        height: 100%
        border: 1px solid $border_color
        border-bottom: 0
        border-radius: 2px 2px 0 0
        box-shadow: -3px 3px 3px rgba(0,0,0,0.05), 3px -3px 5px rgba(#DADEE9, 0.5)

    div.head
        padding: 10px
        background: $table_border
        margin-bottom: 20px
        border-bottom: 1px solid $border_color
        
        a.button
            margin-top: 6px

        h1
            font-size: 22px
            margin: 0
            text-shadow: 1px 1px rgba(255,255,255,0.8)
        
            span
                margin-right: 4px

        p
            display: none

        a.button
            float: right

        &:after
            content: ""
            clear: both
            display: block

    #tools
        margin: 0 10px
        padding: 0
        overflow-x: auto
        overflow-y: auto
        position: relative

        // canvas for connectors
        svg.canvas
            position: absolute
            top: 0
            left: 0

            line.connector
                stroke: lighten(#000, 80%)
                stroke-width: 1px

        // table based system
        table.grid
            position: absolute
            top: 0
            left: 0
            z-index: 2 // over svg
            border-collapse: collapse
            border: 0
            margin: 0
            padding: 0
            background: transparent

            tr
                background: transparent // no alt bg bullshit

            td
                padding: 0
                text-align: center

        // div based system
        div.step
            display: inline-block
            width: 100px
            margin: 5px 0

            div.wrap
                width: 80px
                margin: 0 auto

            for clr in $colors
                &.{clr[0]} .box
                    background: lighten(clr[1], 40%)
                    border: 1px solid darken(clr[1], 20%)
                    border-width: 3px 1px 1px 1px
                    color: darken(clr[1], 20%)
                    box-shadow: inset 1px 1px 5px rgba(0,0,0,0.1)

                &.active.{clr[0]} .box
                    background: clr[1]
                    if dark(darken(clr[1], 20%))
                        color: #FFF
                    else
                        color: darken(clr[1], 50%)

            em.ago
                text-align: center
                display: block
                font-size: 9px

            a
                color: inherit

            div.box
                height: 25px
                overflow: hidden
                text-align: center
                vertical-align: middle
                border-radius: 2px

                h5
                    height: 20px
                    line-height: 20px
                    font-size: 10px
                    margin: 0

                p
                    display: none

footer
    position: fixed
    bottom: 0
    left: 0

    &#wide
        width: 100%
        background: linear-gradient(rgba(247,247,247,0), #FFF 50%)

        p
            text-align: center

    &#bottom
        width: 275px

        .wrap
            text-align: center
            padding: 20px

.button
    display: inline-block
    padding: 6px 30px
    text-decoration: none
    position: relative
    line-height: 1

    &:active
        top: 1px

#modal
    div.reveal-modal
        border: $border_color
        border-radius: 2px
        padding: 0

    .scroll
        overflow-y: auto
        margin: 10px

    h1
        font-size: 22px
        margin: 0
        color: $text_color
        text-shadow: 1px 1px rgba(255,255,255,0.8)
        background: $table_border
        padding: 10px
        border-bottom: 1px solid $border_color
        border-radius: 2px 2px 0 0

        span.entypo
            margin-right: 4px

    .close-reveal-modal
        color: $text_color
        margin-top: 15px

/** ============== Icon fonts ============== */

.entypo
    &:before
        font-family: "Entypo"
        font-weight: normal
        font-size: 1.8em
        line-height: 1em
    
    for font in $entypo
        &.{font[0]}:before
            content: font[1]

/** ============== Hacks ============== */

// Opera.
doesnotexist:-o-prefocus, div#history #tools svg.canvas line.connector
    stroke-width: 2px