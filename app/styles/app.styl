/** ============== Functions ============== */

@import 'nib'

/** ============== Vars ============== */

$colors = (terracotta #E2674A) (goldentainoi #FFCC66) (curiousblue #3399CC) (turq #33CCCC) (strikemaster #996699) (crail #C24747) (deyork #99CC99) (patina #669999) (hopbush #CC6699) (seagrn #339966) (kimberly #666699)
$entypo = (lock "\1f512") (backintime "\e771") (lightup "\1f506") (rightopen "\e762") (clippy "\1f4ce") (crossroads "\e723") (flowbranch "\1F569") (openbook "\1f4d6") (lifebuoy "\e788") (comment "\e718") (help "\2753") (database "\1F4F8") (clipboard "\1F4CB") (download "\1F4E5") (popup "\E74C") (cog "\2699")
$text_color = #68718A
$link_color = #579ED7
$border_color = #BCCAD5
$table_border = #E0E3ED

/** ============== Fonts ============== */

@font-face {
    font-family: 'Lato'
    font-style: normal
    font-weight: 700
    src: url('../fonts/LatoBold.woff') format('woff'),
    url('../fonts/LatoBold.ttf') format('truetype')
}

@font-face {
    font-family: 'Lato'
    font-style: normal
    font-weight: 400
    src: url('../fonts/LatoRegular.woff') format('woff'),
    url('../fonts/LatoRegular.ttf') format('truetype')
}

@font-face {
    font-family: 'Entypo'
    font-style: normal
    font-weight: 400
    src: url('../fonts/Entypo.woff') format('woff'),
    url('../fonts/Entypo.eot') format('eot'),
    url('../fonts/Entypo.ttf') format('truetype'),
    url('../fonts/Entypo.svg') format('svg')
}

// has slight effect on tools but is very common
html
    font-size: 62.5%

// has no effect on tools
body
    background: url('../img/p6.png') !important
    margin: 0

// font and font color for us
body, h1, h2, h3, h4, p, li, table thead tr th, table tbody tr td
    font-family: Lato
    color: $text_color

// link color for us
a
    color: $link_color
    text-decoration: none
    cursor: pointer

    &:hover
        color: darken($link_color, 30%)

.-steps-tool
    // reset color and font for the tool container
    h1, h2, h3, h4, p, li, table thead tr th, table tbody tr td
        font-family: Helvetica, Arial, "Nimbus Sans L", sans-serif
        color: #000

    // reset link color for the tool container
    a
        color: blue

        &:hover
            color: blue

// .label
//     border-radius: 2px
//     font-weight: normal
//     background: linear-gradient(rgba($text_color, 0.15), rgba($text_color, 0.4))
//     color: $text_color
//     text-shadow: -1px -1px rgba(255,255,255,0.3)
//     box-shadow: inset 1px 1px 3px rgba($text_color, 0.2)
//     border: 1px solid rgba($text_color, 0.3)

// code
//     font-size: 10px
//     background: inherit

p
    margin: 0

    code
        font-size: 11px

ul.-steps-ui, ol.-steps-ui
    font-size: 14px
    line-height: 1.6
    margin-bottom: 17px
    padding: 0
    list-style-type: none
    list-style-position: inside

// ::-webkit-input-placeholder
//     color: lighten(#5b617d, 50%)

// input[type="checkbox"]
//     cursor: pointer

// input.filter
//     display: none

// textarea
//     color: #141414
//     font-family: 'Lato'
//     font-size: 14px

.help.-steps-ui, .help.-steps-ui:before
    color: rgba(0,0,0,0.2)
    cursor: pointer

// div.panel
//     border-radius: 2px
//     border: 1px solid $border_color

.button.-steps-ui
    background: linear-gradient(#71B9EC, #54A1E7)
    border: 1px solid #5FA4DE
    border-radius: 2px
    font-size: 14px
    font-weight: bold
    text-transform: uppercase
    text-shadow: 1px 1px rgba(0,0,0,0.25)
    display: inline-block
    padding: 6px 30px
    text-decoration: none
    position: relative
    line-height: 1
    color: #FFF
    cursor: pointer

    &:hover
        color: #FFF

    &:active
        top: 1px

    &.secondary, &.secondary:hover
        background: linear-gradient(#FAFBFD, #E8ECF1)
        border-color: #BFCFDA
        color: #838B9F
        text-shadow: 1px 1px #FFF

// table
//     margin: 0

// table.table
//     border-collapse: collapse
//     border: 0

//     tbody
//         border: 1px solid $table_border
//         border-left: 3px solid $table_border

//     tr
//         th
//             background: #FFF
//             border-bottom: 1px solid $table_border

//         &:nth-child(odd)
//             td
//                 border-bottom: 1px solid $table_border

//         &:nth-child(even)
//             td
//                 background: #F5F6F9

// landing page messages or next steps tabs
table.tabs.-steps-ui
    background: inherit
    border: 0
    border-collapse: collapse
    width: 100%

    td
        padding: 0
        vertical-align: bottom
        height: 38px
        padding: 0 !important

        div
            height: 100%
            cursor: pointer
            position: relative

            &:before
                display: inline-block
                content: ""
                width: 100%
                height: 5px
                position: absolute
                top: 0
                left: 0

            h3
                text-transform: uppercase
                font-weight: bold
                margin: 0 15px
                padding-top: 15px

        &.labeled
            div
                padding-right: 15px

                .count
                    text-shadow: -1px -1px rgba(0,0,0,0.2)
                    position: absolute
                    top: 12px
                    right: 10px
                    background: #5AA4E0
                    box-shadow: inset 0 1px 2px rgba(0,0,0,0.25)
                    border-radius: 2px
                    color: #FFF
                    padding: 0 6px 1px 6px
                    font-size: 14px

        &.active
            border-right: 1px solid #CAD6DF
            border-bottom-color: #F5F6F9

            div
                h3
                    color: $text_color
                
                &:before
                    background: linear-gradient(#74BCF0, #56A7EC)
                    border-right: 1px solid #7C98AB

        &.inactive
            box-shadow: inset 2px 1px 5px 0 rgba(0,0,0,0.1)
            background: linear-gradient(#F7F9FD, #ECEEF3)
            border-bottom: 1px solid #CAD6DF

            div
                h3
                    color: #A7B4C7
                    text-shadow: 1px 1px rgba(255,255,255,0.5)

                &:before
                    background: linear-gradient(#AFBED4, #A3B4CE)

// used on showing a listing of tools
ul.tools.-steps-ui
    li
        margin: 0 -10px
        clear: both

        for clr in $colors
            &.{clr[0]}
                a:before
                    background: clr[1]

        span.entypo
            position: relative
            z-index: 1
            margin-right: 5px

        a
            cursor: pointer
            color: #5B617D
            text-shadow: 1px 1px rgba(255,255,255,0.5)
            display: block
            padding: 0
            border-top: 1px solid transparent
            border-bottom: 1px solid transparent
            transition: color 100ms ease-out
            position: relative
            padding: 0 10px 0 24px

            &:before
                display: block
                content: ""
                width: 5px
                height: 5px
                position: absolute
                top: 9px
                left: 11px
                background: #5b617d

            &:hover
                background: linear-gradient(#8AC8F1, #59A6E8)
                border-top: 1px solid #5FA4DE
                border-bottom: 1px solid #4D93D8
                color: #FFF
                text-shadow: 1px 1px #4D93D8
                box-shadow: inset 0 0 2px 0 rgba(255,255,255,0.5)

// landing page messages from the system
ul.timeline.-steps-ui
    margin: 0

    li
        padding: 8px 15px
        position: relative

        &:nth-child(even)
            background: #F5F6F9
            box-shadow: inset 0 1px 0 rgba(255,255,255,0.7)

        &:not(:last-child)
            border-bottom: 1px solid #DBE7EF

        &.scooter
            background: rgba(#2EC6C8, 0.05)

            a
                color: darken(#2EC6C8, 20%)

        .head
            h5
                margin: 0
                font-size: 14px
                display: inline-block
                color: rgba($text_color, 0.9)

            span
                &.ago
                    float: right
                    font-size: 12px
                    color: rgba($text_color, 0.7)

                &.entypo
                    display: inline-block
                    margin-right: 4px
                    color: rgba($text_color, 0.7)

        p
            margin: 0

.-steps-ui
    // filtering tools matched no actions
    .noactions
        display: none
        font-size: 13px
        font-style: italic

    // button to show truncated tools
    .show-truncated
        display: none

// .popup
//     font-size: 10px
//     padding: 0px 4px
//     border-radius: 2px
//     position: absolute
//     top: 7px
//     right: 5px
//     background: linear-gradient(#fafbfd, #e8ecf1)
//     border: 1px solid #BFCFDA
//     color: #838B9F
//     text-shadow: 1px 1px #FFF
//     cursor: pointer
//     opacity: 0.75

//     &:hover
//         opacity: 1

// .row
//     width: auto
//     min-width: 0

/** ============== Elements ============== */

// wrapping all but history or footer
div#wrapper
    width: 100%
    min-width: 1000px
    min-height: 100%

// the blue header
header#top
    width: 100%
    color: #97a5b8
    background: linear-gradient(#455B7C, #3D516E)
    border-bottom: 1px solid #34455E
    box-shadow: 0 0 1px 1px #888
    text-shadow: -1px -1px rgba(0,0,0,0.2)
    
    *
        box-sizing: border-box

    .row
        width: 1000px
        margin: 0 auto

        &:after
            content: ""
            display: table
            clear: both

    a
        color: #FFF

    .column
        position: relative
        float: left

    .first
        width: 25%

        a
            color: inherit

        h1
            margin: 0
            padding: 10px 0
            font-size: 20px
            line-height: 30px
            color: #FFF
            text-shadow: 1px 1px rgba(0,0,0,0.3)

            span
                font-weight: normal

    .second
        width: 33.333%
        vertical-align: top
        padding: 0 15px

        input#search
            width: 100%
            border: 1px solid #CCC
            border-radius: 2px
            box-shadow: inset 0 1px 2px rgba(0 , 0 , 0 , 0.1)
            color: rgba(0 , 0 , 0 , 0.75)
            display: inline-block
            font-size: 14px
            margin: 10px 0
            padding: 6px

        #always-on
            float: left

            h4, .button.show, p.noactions
                display: none

            ul.tools
                list-style-type: none
                margin: 11px 0 0 0

                li
                    margin: 0
                    display: inline-block

                    &:not(:last-child)
                        margin-right: 6px

                    span.entypo
                        display: none

                    a
                        white-space: nowrap
                        text-shadow: none
                        padding-right: 25px

                        &:hover
                            border-radius: 2px

                    &.button
                        padding: 0

                        a, a:hover
                            padding: 6px 15px 6px 25px
                            background: none
                            border: 0
                            text-shadow: 1px 1px rgba(0,0,0,0.25)
                            box-shadow: none
                            border-radius: 0

    .third
        width: 41.667%
        text-align: right
        line-height: 30px

        p
            color: #97a5b8
            font-size: 14px
            padding: 0
            margin: 10px 0 10px 10px

        span
            display: inline-block
            margin: 0 4px
            font-size: 8px
            height: 18px

// only on app pages
body.app
    // the blue header
    header#top
        .row
            width: auto
            margin: 0 20px

            .column
                &.first
                    width: auto

                &.second
                    width: auto
                    
                    input#search
                        width: 400px
                        float: left
                        margin-right: 15px

                &.third
                    float: right
                    width: 250px

// the middle bit with the tool and next steps
section#middle.-steps-ui
    position: relative

    &:after
        content: '.'
        display: block
        clear: both
        visibility: hidden
        height: 0

    &.narrow
        margin-top: 20px

        .row.-steps-ui
            width: 1000px

    .row.-steps-ui
        margin: 0 auto

        &:after
            content: ""
            display: table
            clear: both

        .column.-steps-ui
            float: left

            &.first
                width: 25%

            &.second
                width: 33.333%

            &.third
                width: 41.667%

                .box.-steps-ui
                    margin-right: 0

        &:not(:last-child)
            margin-bottom: 15px


    // .hidden
    //     display: none !important

    // a landing page box with some content
    .box.-steps-ui
        background: #FEFEFE
        border-radius: 2px
        border: 1px solid $border_color
        box-shadow: -3px 3px 3px rgba(0,0,0,0.05)
        margin: 0 15px

        h2
            font-size: 20px
            margin: 0
            padding: 4px 15px
            border-radius: 2px 2px 0 0
            background: linear-gradient(#f6f8fc, #eceef3)
            border-bottom: 1px solid #cbd8e2

        h3
            text-transform: uppercase
            font-size: 12px

        // tool listing inside
        div.tools
            padding: 15px

            ul.tools
                margin: 0

                for size in 0...10
                    &.size-{size}
                        margin-left: size * 10 px

                li
                    span.help
                        float: right

            h4
                font-size: 16px
                margin: 0
                margin-bottom: 10px

                &:not(:first-child)
                    margin-top: 10px

                for size in 0...10
                    &.size-{size}
                        font-size: 16 - (size * 3) px
                        margin-left: size * 10 px

                        if size isnt 0
                            font-weight: normal

        .noactions
            margin: -15px 15px 15px 15px

        .content
            border-radius: 0 0 2px 2px 

    // a landing page box that does not look like a box at all... it is a nobox
    .nobox.-steps-ui
        h2
            font-size: 20px
            margin-top: 0

    // on a tool page, sidebar steps you can take from here
    aside#right.-steps-ui
        position: absolute
        top: 0
        width: 250px

        &#left
            left: 0
            width: 275px

        &#right
            z-index: 2 // over the history view
            background: #F5F6F9
            border-radius: 2px
            top: 20px
            right: 20px
            border: 1px solid $border_color
            box-shadow: -3px 3px 3px rgba(0,0,0,0.05)

            .content
                padding: 10px 15px
                border-radius: 0 0 2px 2px

        &#left
            p, h3, h4, ul, input.filter, .button.show
                margin: 10px

            h3
                margin: 20px 10px

        h3
            text-transform: uppercase
            font-size: 12px

        h4
            font-size: 14px
            color: #5B617D

        ul
            list-style-type: none
            padding: 0

            li
                background-repeat: no-repeat
                background-position: 0 3px

    // the most contentuous area, the actual widget
    div#widget
        overflow: hidden
        padding-bottom: 5px // for the shade

        // ul.list
        //     list-style-type: none

        // breadcrumbs showing recently used tools
        ul.breadcrumbs.-steps-ui
            list-style-type: none
            display: none
            background: linear-gradient(#FFF, #F4F6FB)
            border: 0
            border-bottom: 1px solid #CBD8E2
            margin: 0
            padding: 6px 10px 7px 20px
            font-weight: bold
            border-radius: 2px
            overflow: hidden

            li
                display: inline-block
                margin: 0
                padding: 0
                float: left
                list-style: none

                a
                    text-transform: uppercase
                    font-size: 11px
                    font-size: 1.1rem
                    cursor: pointer
                    padding: 0 4px

                    &:hover
                        text-decoration: underline

                span
                    font-size: 11px
                    font-size: 1.1rem
                    padding-left: 5px

                &:first-child
                    span
                        padding-left: 0

        // the head showing the tool name, icon and possibly time ago.
        div.head.-steps-ui
            background: $table_border
            box-shadow: inset 0 3px 5px rgba(0,0,0,0.03)

            h1
                font-size: 22px
                float: left
                margin: 20px
                margin-right: 10px
                text-shadow: 1px 1px rgba(255,255,255,0.8)

                &:before
                    content: ''
                    width: 10px
                    height: 10px
                    display: inline-block
                    border: 4px solid #FFF
                    margin-right: 10px
                    box-shadow: 1px 1px 2px rgba(0,0,0,0.15)

                for clr in $colors
                    &.{clr[0]}:before
                        background: clr[1]

            .entypo
                float: left
                margin: 24px 0 0 20px

            em.ago
                float: left
                margin: 29px 0 0 0
                font-size: 14px

            &:after
                content: ""
                display: block
                clear: both

        // h2
        //     font-size: 18px

        // the wrapper containing the widget content
        > div > .wrap
            border-radius: 4px
            // margin: 20px 295px
            // margin-bottom: 0
            margin: 20px 295px 0 20px
            padding: 0
            border: 1px solid $border_color
            box-shadow: -3px 3px 3px rgba(0,0,0,0.05)
            position: relative

        // .half
        //     float: left
        //     width: 50%

        // the accordion of tool steps
        ul.accordion.-steps-ui
            margin: 0
            border: 0
            
            // each step in a tool
            > li
                // list-style: none
                margin: 0
                padding: 0
                border-top: 1px solid #CBD8E2
                
                &:last-child
                    > div.title
                        border-radius: 0 0 2px 2px
                        padding-bottom: 17px

                // the title of this tool's step
                > div.title
                    background: #f6f6f6
                    padding: 15px
                    margin: 0
                    position: relative
                    transition: 0.15s background linear
                    
                    h1, h2, h3, h4, h5
                        margin: 0
                    
                    h5
                        font-size: 17px

                    &:after
                        //content: ""
                        display: block
                        width: 0
                        height: 0
                        border: solid 6px
                        border-color: transparent #9d9d9d transparent transparent
                        position: absolute
                        right: 15px
                        top: 21px;
                
                // this is where the tool will render its step
                > .content
                    display: none
                    padding: 15px
                    overflow: hidden
        
                // on non active steps
                &:not(.active)
                    // make a grey background for the step title
                    > .title
                        background: linear-gradient(#F6F8FC, #ECEEF3)

                // an active accordion step
                &.active
                    border-top: 1px solid $border_color

                    // active title
                    > .title
                        background: white
                        padding-top: 13px
                        
                        // &:after
                        //     display: block
                        //     width: 0
                        //     height: 0
                        //     border: solid 6px
                        //     border-color: #9d9d9d transparent transparent transparent
        
                    // the container
                    > .content
                        background: #FFF
                        display: block

    // .description
    //     p
    //         margin: 10px 0 5px 0

    //     dl
    //         margin-top: 10px

    //         dt
    //             font-size: 11px
    //             font-family: monospace
    //             margin-bottom: 5px

    //         dd
    //             padding-left: 20px
    //             line-height: 16px

    //             &:not(:last-child)
    //                 margin-bottom: 15px

// tools used in the past
div#history.-steps-ui
    position: fixed
    bottom: 0
    width: 100%

    // added by Chaplin
    > div
        margin-right: 295px // width of the sidebar
        background: #FFF
        border: 1px solid #BCCAD5
        border-width: 1px 1px 0 0
        box-shadow: -10px 0 10px rgba(0,0,0,0.2)

    // div.container
    //     background: #FFF
    //     margin-left: 20px
    //     height: 100%
    //     border: 1px solid $border_color
    //     border-bottom: 0
    //     border-radius: 2px 2px 0 0
    //     box-shadow: -3px 3px 3px rgba(0,0,0,0.05), 3px -3px 5px rgba(#DADEE9, 0.5)

    // the title box with buttons
    div.head
        padding: 10px
        background: $table_border
        margin-bottom: 20px
        border-bottom: 1px solid $border_color
        
        a.button
            margin-top: 6px

        h1
            font-size: 22px
            margin: 0
            text-shadow: 1px 1px rgba(255,255,255,0.8)
        
            span
                margin-right: 4px

        p
            display: none

        a.button
            float: right

        &:after
            content: ""
            clear: both
            display: block

    // this thing has the boxes
    #tools
        margin: 0 10px
        padding: 0
        overflow-x: auto
        overflow-y: auto
        position: relative

        // canvas for connectors
        svg.canvas
            position: absolute
            top: 0
            left: 0

            line.connector
                stroke: lighten(#000, 80%)
                stroke-width: 1px

        // the grid for tools
        table.grid
            position: absolute
            top: 0
            left: 0
            z-index: 2 // over svg
            border-collapse: collapse
            border: 0
            margin: 0
            padding: 0

            td
                padding: 0
                text-align: center

        // ehm, one tool block
        div.step
            display: inline-block
            width: 100px
            margin: 0 0 5px 0

            div.wrap
                width: 80px
                margin: 0 auto

            for clr in $colors
                &.{clr[0]} .box.-steps-ui
                    background: lighten(clr[1], 40%)
                    border: 1px solid darken(clr[1], 20%)
                    border-width: 3px 1px 1px 1px
                    color: darken(clr[1], 20%)
                    box-shadow: inset 1px 1px 5px rgba(0,0,0,0.1)

                &.active.{clr[0]} .box.-steps-ui
                    background: clr[1]
                    if dark(darken(clr[1], 20%))
                        color: #FFF
                    else
                        color: darken(clr[1], 50%)

            em.ago
                text-align: center
                display: block
                font-size: 9px

            a
                color: inherit

            // the clickable colored area
            .box.-steps-ui
                overflow: hidden
                text-align: center
                vertical-align: middle
                border-radius: 2px

                h5
                    height: 20px
                    line-height: 20px
                    font-size: 10px
                    margin: 0

                p
                    display: none

// footer with copyright information
footer.-steps-ui
    position: fixed
    bottom: 0
    left: 0

    &#wide
        width: 100%
        background: linear-gradient(rgba(247,247,247,0), #FFF 50%)

        p
            font-size: 14px
            line-height: 1.6
            text-align: center

    &#bottom
        width: 275px

        .wrap
            text-align: center
            padding: 20px

// loading bar
div.loading.-steps-ui
    background: url('../img/loading.gif') no-repeat center
    width: 100%
    height: 19px

// div.progress
//     padding: 2px
//     margin-bottom: 10px
//     border: 1px solid #CCC
//     height: 25px
    
//     .meter
//         background: #2ba6cb
//         height: 100%
//         display: block
//         width: 50%
    
//     &.secondary
//         .meter
//             background: #e9e9e9

//     &.success
//         .meter
//             background: #5da423

//     &.alert
//         .meter
//             background: #c60f13

    
//     &.radius
//         border-radius: 3px

//         .meter
//             border-radius: 2px

//     &.round
//         border-radius: 1000px

//         .meter
//             border-radius: 1000px

// Entypo webfonts
.entypo.-steps-ui
    &:before
        font-family: "Entypo"
        font-weight: normal
        font-size: 1.8em
        line-height: 1em
    
    for font in $entypo
        &.{font[0]}:before
            content: font[1]

// fix connector line in History View in Opera
doesnotexist:-o-prefocus, div#history #tools svg.canvas line.connector
    stroke-width: 2px